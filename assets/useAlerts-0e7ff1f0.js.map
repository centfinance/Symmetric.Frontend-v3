{"version":3,"file":"useAlerts-0e7ff1f0.js","sources":["../../src/composables/useAlerts.ts"],"sourcesContent":["import { orderBy } from 'lodash';\nimport { computed, ref } from 'vue';\n\nimport { lsGet, lsSet } from '@/lib/utils';\n\nexport enum AlertType {\n  ERROR = 'error',\n  INFO = 'info',\n  FEATURE = 'feature',\n}\n\nexport enum AlertPriority {\n  LOW,\n  MEDIUM,\n  HIGH,\n}\n\nexport type Alert = {\n  id: string;\n  priority?: AlertPriority;\n  label: string;\n  type: AlertType;\n  actionLabel?: string;\n  action?: () => void;\n  actionOnClick?: boolean;\n  persistent?: boolean;\n  rememberClose?: boolean;\n};\n\nexport const alertsState = ref<Record<string, Alert>>({});\n\n/**\n * COMPUTED\n */\nconst alerts = computed(() =>\n  Object.values(orderBy(alertsState.value, 'priority', 'desc'))\n);\nconst currentAlert = computed(() =>\n  alerts.value.length > 0 ? alerts.value[0] : null\n);\n\n/**\n * METHODS\n */\nfunction addAlert(alert: Alert) {\n  const wasClosed = lsGet(`alerts.${alert.id}.closed`);\n  if (wasClosed && alert?.rememberClose) return;\n\n  alertsState.value[alert.id] = {\n    ...alert,\n    priority: alert.priority ?? AlertPriority.LOW,\n  };\n}\n\nfunction removeAlert(alertId: string) {\n  const alert = alertsState.value[alertId];\n  if (alert?.rememberClose) lsSet(`alerts.${alertId}.closed`, true);\n\n  delete alertsState.value[alertId];\n}\n\nfunction removeAllAlerts() {\n  alertsState.value = {};\n}\n\nexport default function useAlerts() {\n  return {\n    // computed\n    alerts,\n    currentAlert,\n\n    // methods\n    addAlert,\n    removeAlert,\n    removeAllAlerts,\n  };\n}\n"],"names":["AlertType","AlertPriority","AlertPriority2","alertsState","ref","alerts","computed","orderBy","currentAlert","addAlert","alert","lsGet","removeAlert","alertId","lsSet","removeAllAlerts","useAlerts"],"mappings":"4HAKY,IAAAA,GAAAA,IACVA,EAAA,MAAQ,QACRA,EAAA,KAAO,OACPA,EAAA,QAAU,UAHAA,IAAAA,GAAA,CAAA,CAAA,EAMAC,GAAAA,IACVA,EAAAC,EAAA,IAAA,CAAA,EAAA,MACAD,EAAAC,EAAA,OAAA,CAAA,EAAA,SACAD,EAAAC,EAAA,KAAA,CAAA,EAAA,OAHUD,IAAAA,GAAA,CAAA,CAAA,EAkBC,MAAAE,EAAcC,EAA2B,CAAA,CAAE,EAKlDC,EAASC,EAAS,IACtB,OAAO,OAAOC,EAAA,QAAQJ,EAAY,MAAO,WAAY,MAAM,CAAC,CAC9D,EACMK,EAAeF,EAAS,IAC5BD,EAAO,MAAM,OAAS,EAAIA,EAAO,MAAM,CAAC,EAAI,IAC9C,EAKA,SAASI,EAASC,EAAc,CACZC,EAAM,UAAUD,EAAM,WAAW,IAClCA,GAAA,MAAAA,EAAO,iBAEZP,EAAA,MAAMO,EAAM,EAAE,EAAI,CAC5B,GAAGA,EACH,SAAUA,EAAM,UAAY,CAAA,EAEhC,CAEA,SAASE,EAAYC,EAAiB,CAC9B,MAAAH,EAAQP,EAAY,MAAMU,CAAO,EACnCH,GAAA,MAAAA,EAAO,eAAqBI,EAAA,UAAUD,WAAkB,EAAI,EAEzD,OAAAV,EAAY,MAAMU,CAAO,CAClC,CAEA,SAASE,GAAkB,CACzBZ,EAAY,MAAQ,EACtB,CAEA,SAAwBa,GAAY,CAC3B,MAAA,CAEL,OAAAX,EACA,aAAAG,EAGA,SAAAC,EACA,YAAAG,EACA,gBAAAG,CAAA,CAEJ"}