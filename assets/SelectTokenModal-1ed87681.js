import{_ as P}from"./balancer-sdk-d0995fe4.js";import{aS as W,av as N,aU as G,au as J,ao as Q,cg as X}from"./BalBtn-cca6788c.js";import{_ as Y}from"./BalTextInput-57c2e4cc.js";import{T as Z}from"./connector-16147cef.js";import{B as $,_ as ee}from"./BalAsset-fcab7531.js";import{a as x}from"./anime.es-de4e5aa0.js";import{r as se,u as c,o as te,s as oe,b as o,p as a,j as m,q as n,A as B,v as _,x as j,c as F,F as h,i as w,d as ae,aj as ne,C as le,ao as ce,br as re,e as de,l as g,z as ie}from"./runtime-core.esm-bundler-558f8953.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";import{a as ue}from"./index.esm-d99d5267.js";const fe={name:"TokenListItem",props:{token:{type:Object,required:!0},balanceLoading:{type:Boolean,default:!0},hideBalance:{type:Boolean,default:!1},focussed:{type:Boolean,default:!1}},setup(r){const{fNum:d}=W(),s=se(),{priceFor:e,balanceFor:k}=N(),i=c(()=>Number(k(r.token.address))),u=c(()=>i.value*e(r.token.address));return te(()=>{x({opacity:1,targets:s.value,delay:x.stagger(100)})}),oe(()=>{x({opacity:0,targets:s.value})}),{fNum:d,FNumFormats:G,animateRef:s,balance:i,value:u}}},me={class:"w-40 md:w-60 text-sm truncate text-gray"},_e={key:0,class:"flex flex-col items-end font-medium text-right"},ke={key:1,class:"text-sm font-normal text-secondary"};function ye(r,d,s,e,k,i){const u=$,v=ee;return o(),a("div",{ref:"animateRef",class:j([`flex items-center py-3 border border-transparent ml-4 mr-2 px-2 text-base
  leading-5 opacity-0 highlight hover:bg-blue-50 dark:hover:bg-blue-900
  rounded-lg transition-colors ease-in duration-300`,{"bg-blue-50 dark:bg-blue-900 border-blue-200 dark:border-blue-500":s.focussed}])},[m(u,{address:s.token.address,iconURI:s.token.logoURI,size:34,class:"mr-3"},null,8,["address","iconURI"]),n("div",{class:j(["flex-auto",{"text-blue-500 dark:text-blue-200":s.focussed}])},[B(_(s.token.symbol)+" ",1),n("div",me,_(s.token.name),1)],2),s.hideBalance?w("",!0):(o(),a("span",_e,[s.balanceLoading?(o(),F(v,{key:0,class:"w-14 h-4"})):(o(),a(h,{key:1},[e.balance>0?(o(),a(h,{key:0},[e.balance>=1e-4?(o(),a(h,{key:0},[B(_(e.fNum(e.balance,e.FNumFormats.token)),1)],64)):(o(),a(h,{key:1},[B(" < 0.0001 ")],64))],64)):w("",!0),e.value>0?(o(),a("div",ke,_(e.fNum(e.value,e.FNumFormats.fiat)),1)):w("",!0)],64))]))],2)}const pe=C(fe,[["render",ye]]),be={class:"flex justify-between items-center w-full"},he={class:"flex items-center"},ge={class:"flex px-4 pt-2 pb-3 mr-2"},ve={class:"flex justify-center items-center w-8 h-full"},Te={class:"overflow-hidden"},xe=["onClick"],Be={key:1,class:"flex justify-center items-center h-96"},we=["innerHTML"],Fe=ae({__name:"SelectTokenModal",props:{open:{type:Boolean,default:!1},excludedTokens:{default:()=>[]},subset:{default:()=>[]},includeEther:{type:Boolean,default:!1},disableInjection:{type:Boolean,default:!1},hideTokenLists:{type:Boolean,default:!1},ignoreBalances:{type:Boolean,default:!1},notFoundContent:{}},emits:["close","selectTokenlist","select"],setup(r,{emit:d}){const s=r,e=ne({loading:!1,selectTokenList:!1,query:"",results:{},focussedToken:0}),{getToken:k,searchTokens:i,priceFor:u,balanceFor:v,dynamicDataLoading:S,nativeAsset:M,injectTokens:R}=N(),{t:I}=J(),V=c(()=>e.selectTokenList?I("manageLists"):I("tokenSearch")),y=c(()=>{const t=Object.values(e.results).map(l=>{const p=v(l.address),b=u(l.address),T=Number(p)*b;return{...l,price:b,balance:p,value:T}});return s.ignoreBalances?t:Z.orderBy(t,["value","balance"],["desc","desc"])}),A=c(()=>[...s.excludedTokens,...s.includeEther?[]:[M.address]]),U=c(()=>{console.log(e.results,e.focussedToken);const t=Object.keys(y.value)[e.focussedToken];return y.value[t].address});async function L(t){k(t)||await R([t]),d("select",t),d("close")}le(ce(e,"query"),async t=>{e.loading=!0,e.results=await i(t,{excluded:A.value,disableInjection:s.disableInjection,subset:s.subset}).finally(()=>{e.loading=!1})},{immediate:!0});const{ArrowDown:q,ArrowUp:z,Enter:E,Tab:O}=ue();return re(()=>{q.value&&e.focussedToken<Object.keys(e.results).length&&e.focussedToken++,O.value&&e.focussedToken<Object.keys(e.results).length&&e.focussedToken++,z.value&&e.focussedToken>0&&e.focussedToken--,E.value&&L(U.value)}),(t,l)=>{const p=Q,b=Y,T=de("RecycleScroller"),D=X,H=P;return o(),F(H,{show:"",noContentPad:"",onClose:l[1]||(l[1]=f=>t.$emit("close"))},{header:g(()=>[n("div",be,[n("div",he,[n("h5",null,_(V.value),1)])])]),default:g(()=>[n("div",ge,[m(b,{modelValue:e.query,"onUpdate:modelValue":l[0]||(l[0]=f=>e.query=f),name:"tokenSearchInput",placeholder:t.$t("searchBy"),size:"sm",class:"w-full",autoFocus:""},{prepend:g(()=>[n("div",ve,[m(p,{name:"search",size:"sm",class:"mr-2 text-gray-500"})])]),_:1},8,["modelValue","placeholder"])]),n("div",Te,[y.value.length>0?(o(),F(T,{key:0,class:"overflow-y-scroll list-height",items:y.value,itemSize:70,keyField:"address",buffer:100},{default:g(({item:f,index:K})=>[n("a",{onClick:Ie=>L(f.address)},[m(pe,{token:f,hideBalance:t.ignoreBalances,balanceLoading:ie(S),focussed:K==e.focussedToken,tabIndex:"0"},null,8,["token","hideBalance","balanceLoading","focussed"])],8,xe)]),_:1},8,["items"])):e.loading?(o(),a("div",Be,[m(D)])):(o(),a("div",{key:2,class:"p-12 h-96 text-center text-secondary",innerHTML:t.notFoundContent?t.notFoundContent:t.$t("errorNoTokens")},null,8,we))])]),_:1})}}});const Ue=C(Fe,[["__scopeId","data-v-380ad9e1"]]);export{Ue as S};
//# sourceMappingURL=SelectTokenModal-1ed87681.js.map
