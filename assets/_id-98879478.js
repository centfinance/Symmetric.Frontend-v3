import{_ as $e}from"./BalStack.vue_vue_type_script_lang-342e535e.js";import{B as Te,_ as ye}from"./BalAsset-fcab7531.js";import{u as yo,a as zo}from"./vue-router-461057a5.js";import{bp as qo,br as Eo,aq as le,av as _e,az as so,ay as ao,aw as he,aS as ue,aU as J,at as jo,bn as ge,ao as te,au as ve,bx as Ho,aZ as be,a_ as Ge}from"./BalBtn-cca6788c.js";import{q as we,u as Re,z as We,i as Uo,r as Ne,D as Go,a as ho,f as Wo,U as Yo,R as bo,C as Ee,I as Qo,G as no,H as lo,V as wo,n as Po,g as $o,W as io,k as Lo,X as Ko,j as Jo,Y as Zo,Z as Xo,P as et,h as ot,e as tt,_ as st,s as at,$ as nt,t as lt}from"./usePoolHelpers-eb955974.js";import{u as ie,Z as G,Q as To,aq as ro,ab as it,aa as j,T as xe,o as je,al as He,S as rt,N as co,W as ct,i as xo,am as ut,ar as dt,$ as pt,as as mt}from"./connector-16147cef.js";import{u as So}from"./useDisabledJoinPool-118f9751.js";import{a as Ue,R as q}from"./pools-18fd7fb0.js";import{d as O,ao as Pe,u as m,b as s,p as B,z as e,c as b,q as a,j as d,A as E,v as k,l as _,i as V,al as Co,e as Ye,x as ae,F as U,k as me,h as Ao,r as ee,o as Qe,n as Bo,aj as fe,T as ft,D as _t,a as vt,C as gt,E as kt,G as yt}from"./runtime-core.esm-bundler-558f8953.js";import{u as Se}from"./pool-staking.provider-e441fa29.js";import{u as Ke,a as ht,p as bt,b as wt}from"./user-pools.provider-b709d200.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as Je}from"./BalTabs.vue_vue_type_style_index_0_lang-73eb95bf.js";import{u as Le}from"./useBreakpoints-ee2a85bc.js";import{_ as ke}from"./BalLink-65772d8f.js";import{_ as Pt,c as $t}from"./coingecko.service-492c3cc3.js";import{_ as Lt}from"./BalBlankSlate.vue_vue_type_style_index_0_lang-8c053ed8.js";import{P as Tt}from"./constants-5d025550.js";import{_ as xt}from"./BalPopover-a283b4e9.js";import{u as St}from"./useDarkMode-6a81be08.js";import{u as Ct}from"./useTailwind-38f80624.js";import{_ as Me}from"./BalAlert-fdfde589.js";import{h as At,f as Ve,j as Ze}from"./useVeBAL-5fa15e49.js";import{L as Bt}from"./echarts-2876138a.js";import{_ as Ce}from"./BalTooltip.vue_vue_type_style_index_0_lang-8bf6235c.js";import{_ as Io}from"./APRTooltip.vue_vue_type_script_setup_true_lang-c7384c0d.js";import{b as Ae,p as Xe}from"./api-e32fdf3d.js";import{a as De,u as It}from"./usePoolsQuery-5de67548.js";import{_ as eo}from"./BalTable.vue_vue_type_style_index_0_lang-26788def.js";import{_ as Vo}from"./BalAccordion.vue_vue_type_script_setup_true_lang-a2418c88.js";import{A as ce}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-f37eca6e.js";import{_ as No}from"./StakePreviewModal.vue_vue_type_script_setup_true_lang-33f4be12.js";import{u as Vt,N as uo}from"./cross-chain-sync.provider-360a4a87.js";import{_ as Nt}from"./CheckpointGaugeModal.vue_vue_type_script_setup_true_lang-57fbd20a.js";import{_ as Rt}from"./UnlockPreviewModal.vue_vue_type_script_setup_true_lang-d5b06c48.js";import{_ as Ro}from"./BalChipNew.vue_vue_type_script_setup_true_lang-8ef0bb16.js";import{E as Mt}from"./links-ed92fb01.js";import{u as Fe}from"./usePoolQuery-7e1952e9.js";import{g as Dt}from"./balancer-sdk-d0995fe4.js";import{b as Ft}from"./index-155f0d25.js";import{m as Ot}from"./meta.service-1c1722a9.js";import{_ as zt}from"./BalAssetSet-0f096fdb.js";import{_ as qt}from"./TokenPills.vue_vue_type_script_setup_true_lang-7a301204.js";import{P as Ie}from"./useProtocols-aae81d2e.js";import{u as Et}from"./pool.provider-20e73aa3.js";import"./Avatar.vue_vue_type_script_setup_true_lang-5ab9890e.js";import"./_commonjsHelpers-87174ba5.js";import"./metamask.connector-0225016b.js";import"./browser-6c45db04.js";import"./token-lists.provider-00d13873.js";import"./user-data.provider-8fbcf693.js";import"./useVeBalLockInfoQuery-e92ea085.js";import"./index-18b6daea.js";import"./StablePhantomPool-f25cd4a4.js";import"./liquidity-gauge-c56bdf84.js";import"./useQueryHelpers-8fe10019.js";import"./numeral-77821a11.js";import"./useTransactions-114fc9d7.js";import"./index-fe1d1633.js";import"./events-5f626723.js";import"./readable-browser-a0df197a.js";import"./immutable-2b056f5a.js";import"./index-1de0572e.js";import"./tailwind.config-235e68cf.js";import"./subgraph-fallback.service-7e7c32be.js";import"./balancer-api.service-037872f8.js";import"./wallet-logos-346092ca.js";import"./anime.es-de4e5aa0.js";import"./BalCircle-324fa9cd.js";import"./ConfirmationIndicator.vue_vue_type_script_setup_true_lang-35a245bf.js";import"./BalDataListRow.vue_vue_type_script_setup_true_lang-e378cd32.js";import"./useTokenApprovalActions-42c413d9.js";import"./useGraphQuery-d0a03aea.js";import"./BalChip-951d5b52.js";import"./useAlerts-0e7ff1f0.js";var jt=6e4;function po(r,t){qo(2,arguments);var o=Eo(t);return At(r,o*jt)}const Ht={class:"p-4 w-full bg-gray-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-900"},Ut={key:1},Gt={class:"grid grid-cols-2 gap-2"},Wt={class:"pt-4 text-xs text-secondary"},Yt=O({__name:"PoolActionsCard",props:{pool:{},missingPrices:{type:Boolean}},emits:["risksClicked"],setup(r,{emit:t}){const o=r,{isMigratablePool:c,hasNonApprovedRateProviders:l}=we(Pe(o,"pool")),{isWalletReady:v,startConnectWithInjectedProvider:u}=le(),{networkSlug:y}=ie(),{shouldDisableJoins:i}=So(o.pool),{balanceFor:f}=_e(),{isAffectedBy:n}=Re(m(()=>o.pool.id)),S=m(()=>G(f(o.pool.address)).gt(0)),x=m(()=>!!We(o.pool.id)||Uo(o.pool.id)||l.value||c(o.pool)||i.value);return(L,$)=>{const w=he;return s(),B("div",Ht,[e(v)?(s(),B("div",Ut,[a("div",Gt,[d(w,{tag:x.value?"div":"router-link",to:{name:"add-liquidity",params:{networkSlug:e(y)}},label:L.$t("addLiquidity"),color:"gradient",disabled:x.value,block:"",onClick:$[0]||($[0]=T=>e(so)(e(ao).ClickAddLiquidity))},null,8,["tag","to","label","disabled"]),e(n)(e(Ue).CspPoolVulnWarning)?(s(),b(w,{key:0,tag:"router-link",to:{name:"recovery-exit",params:{networkSlug:e(y)}},label:L.$t("withdraw.label"),disabled:!S.value,color:"blue",outline:"",block:""},null,8,["to","label","disabled"])):(s(),b(w,{key:1,tag:S.value?"router-link":"div",to:{name:"withdraw",params:{networkSlug:e(y)}},label:L.$t("withdraw.label"),disabled:!S.value,color:"blue",outline:"",block:"",onClick:$[1]||($[1]=T=>e(so)(e(ao).ClickWithdraw))},null,8,["tag","to","label","disabled"]))]),a("div",Wt,[E(k(L.$t("poolTransfer.myPoolBalancesCard.risksDisclaimer"))+" ",1),a("a",{class:"font-medium link",onClick:$[2]||($[2]=T=>t("risksClicked"))},k(L.$t("poolTransfer.myPoolBalancesCard.poolsRisks")),1),E(". ")])])):(s(),b(w,{key:0,label:L.$t("connectWallet"),color:"gradient",block:"",onClick:e(u)},null,8,["label","onClick"]))])}}}),Qt={class:"card-header"},Kt={class:"text-2xl"},Jt={key:0,class:"py-2 px-4"},Zt=O({__name:"MyPoolBalancesCard",props:{pool:{},missingPrices:{type:Boolean}},emits:["risksClicked"],setup(r,{emit:t}){const o=r,{balanceFor:c}=_e(),{fNum:l}=ue(),{isWalletReady:v}=le(),{isMigratablePool:u}=we(Pe(o,"pool")),{stakedShares:y}=Se(),{networkSlug:i}=ie(),f=yo(),{totalLockedValue:n}=Ke({enabled:Ne(o.pool.id)}),S=m(()=>G(c(o.pool.address)).plus(y.value).toString()),x=m(()=>Ne(o.pool.id)?n.value:Go(o.pool,S.value)),L=m(()=>(G(S.value).gt(0)||G(y.value).gt(0))&&u(o.pool));function $(w){var T;f.push({name:"migrate-pool",params:{from:w.id,to:(T=To.network.pools.Migrations)==null?void 0:T[w.id].toPoolId},query:{returnRoute:"pool",returnParams:JSON.stringify({id:w.id,networkSlug:i})}})}return(w,T)=>{const p=he,h=ge;return s(),b(h,{shadow:"2xl",noPad:"",class:"rounded-xl"},{header:_(()=>[a("div",Qt,[a("h5",null,k(w.$t("poolTransfer.myPoolBalancesCard.title")),1),a("h5",Kt,k(e(v)?e(l)(x.value,e(J).fiat):"-"),1)])]),footer:_(()=>[d(Yt,{pool:w.pool,missingPrices:w.missingPrices,onRisksClicked:T[1]||(T[1]=P=>t("risksClicked"))},null,8,["pool","missingPrices"])]),default:_(()=>[L.value?(s(),B("div",Jt,[d(p,{color:"blue",block:"",onClick:T[0]||(T[0]=jo(P=>$(o.pool),["prevent"]))},{default:_(()=>[E(k(w.$t("migratePool.migrateLiquidity")),1)]),_:1})])):V("",!0)]),_:1})}}});const Xt=se(Zt,[["__scopeId","data-v-444bb149"]]);function Mo(r){const{balanceFor:t}=_e(),{stakedShares:o}=Se(),c=m(()=>Ne(r.value.id)),{totalLockedShares:l}=Ke({enabled:c.value}),{fNum:v}=ue(),u=m(()=>{let i=G(t(r.value.address)).plus(o.value);return c.value&&l.value&&(i=i.plus(l.value)),i.div(G(r.value.totalShares)).multipliedBy(100)}),y=m(()=>v(u.value.toString(),{maximumFractionDigits:4,minimumFractionDigits:0})+"%");return{userPoolPercentage:u,userPoolPercentageLabel:y}}const es={class:"group-hover:text-purple-500 dark:group-hover:text-yellow-500 transition-colors"},os={key:0,class:"justify-self-end"},ts={class:"justify-self-end"},ss={class:"justify-self-end"},as={class:"justify-self-end"},ns=O({__name:"TokenBreakdown",props:{token:{},parentLevel:{default:0},showUserShares:{type:Boolean},rootPool:{},tokensData:{}},setup(r){const t=r,{token:o,showUserShares:c,rootPool:l}=Co(t),v=m(()=>t.tokensData[o.value.address]),{explorerLinks:u}=le(),{isDeepPool:y}=we(l),i=ho(l.value.poolType),{getToken:f}=_e(),n=m(()=>t.parentLevel+1),S=m(()=>{switch(n.value){case 1:return"level-1";case 2:return"level-2";case 3:return"level-3";case 4:return"level-4";default:return"pl-4"}});function x(L){var $;return(($=f(L.address))==null?void 0:$.symbol)||L.symbol||"---"}return(L,$)=>{var P,C;const w=Te,T=te,p=ke,h=Ye("TokenBreakdown",!0);return s(),B(U,null,[a("div",{class:ae(["grid gap-y-4 px-4 w-full items-center border-b dark:border-b-gray-900 last:border-0 transition-all ease-in duration-300",e(i)?"grid-cols-5":"grid-cols-4",S.value])},[d(p,{href:e(u).addressLink(e(o).address),external:"",noStyle:"",class:"group flex items-center"},{default:_(()=>[d(w,{address:e(o).address,class:ae(e(y)&&n.value>1?"nested-token":"mr-2 shrink-0 z-10"),size:e(y)&&n.value>2?24:e(y)&&n.value>1?28:36},null,8,["address","class","size"]),a("span",es,k(x(e(o))),1),d(T,{name:"arrow-up-right",size:"sm",class:"ml-1 text-gray-500 group-hover:text-purple-500 dark:group-hover:text-yellow-500 transition-colors"})]),_:1},8,["href"]),e(i)?(s(),B("div",os,k(v.value.tokenWeightLabel),1)):V("",!0),a("div",ts,k(e(c)?v.value.userBalanceLabel:v.value.balanceLabel),1),a("div",ss,k(e(c)?v.value.userFiatLabel:v.value.fiatLabel),1),a("div",as,k(v.value.getTokenPercentageLabel()),1)],2),e(y)?(s(!0),B(U,{key:0},me((C=(P=e(o).token)==null?void 0:P.pool)==null?void 0:C.tokens,I=>(s(),b(h,{key:I.address,token:I,parentLevel:n.value,showUserShares:e(c),rootPool:e(l),tokensData:L.tokensData},null,8,["token","parentLevel","showUserShares","rootPool","tokensData"]))),128)):V("",!0)],64)}}});const ls=se(ns,[["__scopeId","data-v-11af33a9"]]);function ze(r){return r===""?!1:!Number.isNaN(Number(r))}function is(r){const{fNum:t,toFiat:o}=ue(),{userPoolPercentage:c}=Mo(r),l=m(()=>Wo(r.value));let v={},u=0;return m(()=>y(r));function y(f){return u=0,v={},f.value.tokens.forEach(n=>{i(n,1)}),v}function i(f,n){var M,H,W,D,X,Y,re,de;const S=G(f.balance).times(n).toString(),L=((H=(M=f==null?void 0:f.token)==null?void 0:M.pool)==null?void 0:H.tokens)&&l.value,$=R(),w=g();ze(w)&&(u+=Number(w));const T=N(w),p=w===""?"":A(T),h=$===""?"":Z(N($)),P=f!=null&&f.weight?t(f.weight,J.percent):"";function C(){if(u===0)return"0%";const z=Number(w)/Number(u);return z===0?"":t(z,J.percent)}if(v[f.address]={balanceLabel:Z(R()),fiatLabel:A(w),userFiatLabel:p,userBalanceLabel:h,tokenWeightLabel:P,getTokenPercentageLabel:C},!((W=f.token)!=null&&W.pool)||!l.value)return;const F=G((f==null?void 0:f.balance)||"0").div(((X=(D=f.token)==null?void 0:D.pool)==null?void 0:X.totalShares)||1).times(n).toNumber();(de=(re=(Y=f.token)==null?void 0:Y.pool)==null?void 0:re.tokens)==null||de.forEach(z=>i(z,F));function R(){return L?"":S}function Z(z){return ze(z)?t(z,J.token):z}function g(){var Q;if(L)return"";let z=o(S,f.address);return z==="0"&&((Q=f.token)!=null&&Q.latestUSDPrice)&&(z=G(S).times(f.token.latestUSDPrice).toString()),z}function A(z){return z=z.toString(),ze(z)?t(z,J.fiat):z}function N(z){return Number(z)*Number(c.value)/100}}}const rs=O({__name:"PercentagePill",props:{isActive:{type:Boolean,default:!1}},setup(r){const t=r,o=m(()=>t.isActive?"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-500/20":"text-secondary bg-gray-200 dark:bg-gray-800");return(c,l)=>(s(),B("div",{class:ae(["flex p-1 text-sm rounded",[o.value]])},[Ao(c.$slots,"default")],2))}}),cs={class:"flex justify-start items-center mx-4 lg:mx-0 mb-6 border-b dark:border-gray-900"},us={key:0,class:"justify-self-end"},ds={class:"justify-self-end"},ps={class:"justify-self-end"},ms={class:"justify-self-end"},fs={class:"grid"},mo="TOTAL_COMPOSITION",qe="MY_POOL_SHARE",_s=O({__name:"PoolCompositionCard",props:{pool:{}},setup(r){const t=r,{pool:o}=Co(t),c=ho(o.value.poolType),{upToLargeBreakpoint:l}=Le(),{userPoolPercentage:v,userPoolPercentageLabel:u}=Mo(o),{t:y}=ve(),i=m(()=>Yo(o.value)),f=is(i),n={value:mo,label:y("poolComposition.tabs.totalComposition")},S={value:qe,label:y("poolComposition.tabs.myPoolShare")},x=ee(mo),L=m(()=>v.value.gt(0)),$=m(()=>L.value?[n,S]:[n]),w=m(()=>x.value===qe);return Qe(async()=>{await Bo(),L.value&&(x.value=qe)}),(T,p)=>{const h=Je,P=ge;return s(),B(U,null,[a("div",cs,[d(h,{modelValue:x.value,"onUpdate:modelValue":p[0]||(p[0]=C=>x.value=C),tabs:$.value,noPad:"",class:"-mb-px"},{default:_(()=>[L.value?(s(),b(rs,{key:0,isActive:w.value},{default:_(()=>[E(k(e(u)),1)]),_:1},8,["isActive"])):V("",!0)]),_:1},8,["modelValue","tabs"])]),d(P,{class:"overflow-x-auto whitespace-nowrap",square:e(l),noBorder:e(l),noPad:""},{header:_(()=>[a("div",{class:ae(["grid p-4 w-full text-base font-semibold border-b dark:border-gray-900",[e(c)?"grid-cols-5":"grid-cols-4"]])},[a("div",null,k(T.$t("token")),1),e(c)?(s(),B("div",us,k(T.$t("weight")),1)):V("",!0),a("div",ds,k(T.$t("balance")),1),a("div",ps,k(T.$t("value")),1),a("div",ms,k(T.$t("poolComposition.token%")),1)],2)]),default:_(()=>[a("div",fs,[(s(!0),B(U,null,me(i.value.tokens,C=>(s(),B("div",{key:C.address,class:"grid nested-group"},[d(ls,{token:C,showUserShares:w.value,rootPool:e(o),tokensData:e(f)},null,8,["token","showUserShares","rootPool","tokensData"])]))),128))])]),_:1},8,["square","noBorder"])],64)}}});const vs=se(_s,[["__scopeId","data-v-70be56ee"]]),gs={class:"h-10 text-base period-select-input"},ks={class:"flex flex-1 justify-between items-center h-full"},ys={class:"period-select-input__selected"},hs=["onClick"],bs={class:"py-2 px-3 text-sm font-medium text-gray-500 whitespace-nowrap bg-gray-50 dark:bg-gray-800 border-b dark:border-gray-900"},ws=["onClick"],Ps={class:"flex items-center ml-1 font-medium"},$s=O({__name:"PoolChartPeriodSelect",props:{options:{},activeOption:{}},emits:["change-option"],setup(r,{emit:t}){return(o,c)=>{const l=te,v=xt;return s(),b(v,{noPad:""},{activator:_(()=>[a("div",gs,[a("div",ks,[a("div",ys,k(o.activeOption.text),1),d(l,{name:"chevron-down"})])])]),default:_(({close:u})=>[a("div",{class:"flex overflow-hidden flex-col w-44 rounded-lg",onClick:u},[a("div",bs,k(o.$t("poolChart.period.title"))+": ",1),(s(!0),B(U,null,me(o.options,y=>(s(),B("div",{key:y.days,class:"flex justify-between items-center p-3 hover:bg-gray-50 dark:hover:bg-gray-850 cursor-pointer",onClick:i=>t("change-option",y)},[a("div",Ps,k(y.text),1),o.activeOption.days===y.days?(s(),b(l,{key:0,name:"check",class:"text-blue-500"})):V("",!0)],8,ws))),128))],8,hs)]),_:1})}}});const Ls=se($s,[["__scopeId","data-v-651d577b"]]),Ts={},xs={class:"flex flex-col text-sm"},Ss={class:"flex items-center text-blue-600"};function Cs(r,t){const o=te,c=ke,l=Me;return s(),b(l,{class:"py-2 px-2.5 mb-5",type:"tip",size:"md",block:"",title:""},{default:_(()=>[a("div",xs,[a("span",null,k(r.$t("poolChart.fxPoolWarning")),1),d(c,{href:"https://docs.xave.co/product-overview-1/amm#mechanism",external:"",noStyle:""},{default:_(()=>[a("div",Ss,[a("span",null,k(r.$t("learnMore")),1),d(o,{name:"arrow-up-right",size:"sm"})])]),_:1})])]),_:1})}const As=se(Ts,[["render",Cs]]),Bs={key:1,class:"chart"},Is={class:"flex flex-col xs:flex-row xs:flex-wrap justify-between mb-6 dark:border-gray-900"},Vs={class:"flex mb-4"},Ns={class:"flex items-center"},Rs={class:"flex flex-col items-start xs:items-end text-2xl font-semibold tabular-nums"},fo=2,Ms=O({__name:"PoolChart",props:{historicalPrices:{default:null},snapshots:{default:null},loading:{type:Boolean,default:!1},poolPremintedBptIndex:{},totalLiquidity:{},tokensList:{},poolType:{}},setup(r){const t=r,{t:o}=ve(),c=Ct(),{fNum:l}=ue(),{isMobile:v}=Le(),{darkMode:u}=St(),y=[{value:"volume",label:o("poolChart.tabs.volume")},{value:"tvl",label:o("poolChart.tabs.tvl")},{value:"fees",label:o("poolChart.tabs.fees")}],i=ee(y[0].value),f=ee({num:"",isNegative:!1}),n=ee(""),S=ee(!1),x=m(()=>Object.values(t.snapshots||[])),L=m(()=>[{text:o("poolChart.period.days",[90]),days:90},{text:o("poolChart.period.days",[180]),days:180},{text:o("poolChart.period.days",[365]),days:365},{text:o("poolChart.period.all"),days:x.value.length}]),$=ee(L.value[0]),w=m(()=>x.value.map(g=>Ve(po(g.timestamp,new Date(g.timestamp).getTimezoneOffset()),"yyyy/MM/dd")));function T(g){const A=[];return t.poolType===Ee.StablePhantom?g.forEach((N,M)=>{const H=w.value[M];if(M===0){A.push(Object.freeze([H,Number(t.totalLiquidity||0)]));return}A.push(Object.freeze([H,Number(N.liquidity)]))}):g.forEach((N,M)=>{var Y;const H=w.value[M];if(M===0){A.push(Object.freeze([H,Number(t.totalLiquidity||0)]));return}const W=t.historicalPrices&&t.historicalPrices[N.timestamp];if(!W||W.length<(((Y=t.tokensList)==null?void 0:Y.length)||0)){if(!N.liquidity)return;A.push(Object.freeze([H,Number(N.liquidity)]));return}let D=[...N.amounts];N.amounts.length>W.length&&(D=D.filter((re,de)=>de!==t.poolPremintedBptIndex));const X=D.reduce((re,de,z)=>(re+=Number(de)*W[z],re),0);A.push(Object.freeze([H,X]))}),{color:[c.theme.colors.blue[600]],hoverBorderColor:c.theme.colors.pink[500],hoverColor:u.value?c.theme.colors.gray[900]:c.theme.colors.white,areaStyle:{color:new Bt(0,0,0,1,[{offset:0,color:"rgba(14, 165, 233, 0.08)"},{offset:1,color:"rgba(68, 9, 236, 0)"}])},chartType:"line",data:[{name:"TVL",values:A}],defaultHeaderStateValue:l(A[0][1],{style:"currency"})}}function p(g,A,N){const M=g.map((W,D)=>{const X=parseFloat(W.swapFees);let Y;return D===x.value.length-1?Y=0:D===N?Y=parseFloat(x.value[D+1].swapFees):Y=parseFloat(g[D+1].swapFees),Object.freeze([w.value[D],X-Y])});g.length<30&&M.push(...Z());const H=Number(g[0].swapFees)-(A?0:Number(g[N].swapFees));return{color:[c.theme.colors.yellow[400]],chartType:"bar",hoverColor:c.theme.colors.pink[500],data:[{name:"Fees",values:M}],defaultHeaderStateValue:l(H,{style:"currency"})}}function h(g,A,N){const M=g.map((W,D)=>{const X=parseFloat(W.swapVolume);let Y;return D===x.value.length-1?Y=0:D===N?Y=parseFloat(x.value[D+1].swapVolume):Y=parseFloat(g[D+1].swapVolume),Object.freeze([w.value[D],X-Y])});g.length<30&&M.push(...Z());const H=Number(g[0].swapVolume)-(A?0:Number(g[N].swapVolume));return{color:[c.theme.colors.green[400]],chartType:"bar",hoverColor:c.theme.colors.pink[500],data:[{name:"Volume",values:M}],defaultHeaderStateValue:l(H,{style:"currency"})}}const P=m(()=>{const g=$.value.days===x.value.length?x.value:x.value.slice(0,$.value.days-1),A=g.length===x.value.length,N=g.length-1;return i.value==="tvl"?T(g):i.value==="fees"?p(g,A,N):h(g,A,N)}),C=m(()=>{const g=L.value.find(N=>N.days===$.value.days);let A=`${g==null?void 0:g.text} ${i.value}`;return i.value==="tvl"&&(A=o("poolChart.defaultTitle.tvl")),{title:A,value:P.value.defaultHeaderStateValue}}),I=m(()=>{const{poolType:g}=t;return g&&bo(g)&&i.value==="fees"});function F(g){$.value=g}function R(g){f.value.num=l(g.chartValue,{style:"currency",maximumFractionDigits:0,fixedFormat:!0}),f.value.isNegative=g.chartValue<0,n.value=Ve(new Date(g.chartDate),Tt)}function Z(){const g=x.value[x.value.length-1].timestamp/1e3,A=30-x.value.length,N=[];for(let M=1;M<=A;M++){const H=g-M*Ho;N.push(H*1e3)}return N.map(M=>Object.freeze([Ve(po(M,new Date(M).getTimezoneOffset()),"yyyy/MM/dd"),0]))}return(g,A)=>{const N=ye,M=Je,H=te,W=Lt,D=Pt;return g.loading?(s(),b(N,{key:0,class:"chart-loading-block"})):x.value.length>=fo?(s(),B("div",Bs,[a("div",Is,[a("div",Vs,[d(M,{modelValue:i.value,"onUpdate:modelValue":A[0]||(A[0]=X=>i.value=X),tabs:y,noPad:"",class:"mr-6 -mb-px"},null,8,["modelValue"]),a("div",Ns,[d(Ls,{options:L.value,activeOption:$.value,onChangeOption:F},null,8,["options","activeOption"])])]),a("div",Rs,[a("p",{class:ae(["tracking-tighter",{"text-red-500":f.value.isNegative&&S.value}])},k(S.value?f.value.num:C.value.value),3),a("div",{class:ae(["text-sm font-medium text-secondary",{"text-pink-500":S.value}])},[a("p",null,k(S.value?n.value:C.value.title),1)],2)])]),P.value.data[0].values.length<=fo?(s(),b(W,{key:0,class:"h-96"},{default:_(()=>[d(H,{name:"bar-chart"}),E(" "+k(g.$t("noPriceInfo")),1)]),_:1})):(s(),b(D,{key:1,height:"96",data:P.value.data,axisLabelFormatter:{yAxis:{style:"currency",maximumFractionDigits:0,fixedFormat:!0,abbreviate:!0}},areaStyle:P.value.areaStyle,color:P.value.color,hoverColor:P.value.hoverColor,hoverBorderColor:P.value.hoverBorderColor,xAxisMinInterval:3600*1e3*24*30,showLegend:!1,needChartValue:"",chartType:P.value.chartType,showTooltipLayer:!1,hideYAxis:e(v),onSetCurrentChartValue:R,onMouseLeaveEvent:A[1]||(A[1]=X=>S.value=!1),onMouseEnterEvent:A[2]||(A[2]=X=>S.value=!0)},null,8,["data","areaStyle","color","hoverColor","hoverBorderColor","chartType","hideYAxis"])),I.value?(s(),b(As,{key:2})):V("",!0)])):(s(),b(W,{key:2,class:"h-96",align:"center"},{default:_(()=>[d(H,{name:"bar-chart"}),E(" "+k(g.$t("insufficientData")),1)]),_:1}))}}});const Ds=se(Ms,[["__scopeId","data-v-3e4dc48c"]]),Fs={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4"},Os={class:"flex mb-2 text-sm font-medium text-secondary"},zs=O({__name:"PoolStatCards",props:{pool:{default:null},poolApr:{default:null},loading:{type:Boolean,default:!1},loadingApr:{type:Boolean}},setup(r){const t=r,{fNum:o}=ue(),{t:c}=ve(),l=m(()=>{var y;const u=t.poolApr;return u?Qo(u,(y=t.pool)==null?void 0:y.boost):"0"}),v=m(()=>{var i,f,n,S,x;const u=Number(((i=t.pool)==null?void 0:i.volumeSnapshot)||"0"),y=Number(((f=t.pool)==null?void 0:f.feesSnapshot)||"0");return[{id:"poolValue",label:c("poolValue"),value:o(((n=t.pool)==null?void 0:n.totalLiquidity)||"0",J.fiat),loading:t.loading},{id:"volumeTime",label:c("volumeTime",["24h"]),value:o(u>ro?"-":u,J.fiat),loading:t.loading},{id:"feesTime",label:c("feesTime",["24h"]),value:o(y>ro?"-":y,J.fiat),loading:t.loading},{id:"apr",label:"APR",value:Number(((S=t.poolApr)==null?void 0:S.swapFees)||"0")>it||no(((x=t.pool)==null?void 0:x.id)||"")?"-":l.value,loading:t.loadingApr}]});return(u,y)=>{const i=ye,f=Ce,n=te,S=ge;return s(),B("div",Fs,[(s(!0),B(U,null,me(v.value,x=>(s(),B(U,{key:x.id},[x.loading||!u.pool?(s(),b(i,{key:0,class:"h-24"})):(s(),b(S,{key:1},{default:_(()=>[a("div",Os,[a("span",null,k(x.label),1),x.id==="apr"&&u.poolApr&&!e(no)(u.pool.id)?(s(),B(U,{key:0},[e(lo)(u.pool.poolType)?(s(),b(f,{key:0,width:"36",text:u.$t("lbpAprTooltip"),iconSize:"sm",iconClass:"ml-1"},null,8,["text"])):(s(),b(Io,{key:1,pool:u.pool,poolApr:u.poolApr},null,8,["pool","poolApr"]))],64)):V("",!0)]),a("div",{class:ae(["flex items-center text-xl font-medium",{"text-gray-300 dark:text-gray-600 line-through":x.id==="apr"&&e(lo)(u.pool.poolType)}])},[a("span",{class:ae({"mr-2":x.tooltip})},k(x.value),3),x.tooltip?(s(),b(f,{key:0,text:x.tooltip},{activator:_(()=>[d(n,{name:"info",size:"sm",class:"text-gray-400"})]),_:2},1032,["text"])):V("",!0)],2)]),_:2},1024))],64))),128))])}}});function Do(r,t={},o={}){const{networkId:c}=ie(),l=fe(be.Pools.Swaps(c,r,t)),v=async({pageParam:y=0})=>{const i=y===0?j.Pagination.PerPoolInitial:j.Pagination.PerPool,f=await Ae.poolSwaps.get({first:i,skip:y,where:Object.assign({poolId:r},t)});return{poolSwaps:f,skip:f.length>=i?y+i:void 0}},u=fe({getNextPageParam:y=>y.skip,...o});return De(l,v,u)}function qs(r,t={}){const{account:o,isWalletReady:c}=le(),{networkId:l}=ie(),v=m(()=>c.value&&o.value!=null),u=fe(be.Pools.UserSwaps(l,r,o)),y=async({pageParam:f=0})=>{const n=await Ae.poolSwaps.get({first:j.Pagination.PerPage,skip:f,where:{userAddress:o.value.toLowerCase(),poolId:r}});return{poolSwaps:n,skip:n.length>=j.Pagination.PerPage?f+j.Pagination.PerPage:void 0}},i=fe({enabled:v,getNextPageParam:f=>f.skip,...t});return De(u,y,i)}var K=(r=>(r.ALL_ACTIVITY="allActivity",r.USER_ACTIVITY="userActivity",r.SWAPS="swaps",r))(K||{});const Es={class:"py-2 px-6"},js={class:"flex items-center"},Hs={class:"flex mr-3 center"},Us={class:"flex flex-wrap items-center py-4 px-6 -mt-1"},Gs={class:"token-item"},Ws={class:"font-numeric"},Ys={class:"token-item"},Qs={class:"font-numeric"},Ks={key:0,class:"flex items-center p-1 px-2 m-1 bg-gray-50 dark:bg-gray-700 rounded-lg"},Js={class:"font-numeric"},Zs={class:"flex justify-end py-4 px-6 font-numeric"},Xs={class:"py-4 px-6"},ea={class:"flex justify-end items-center text-right whitespace-nowrap wrap"},oa=O({__name:"Table",props:{poolSwaps:{},isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},loadMore:{},isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""},pool:{}},emits:["loadMore"],setup(r,{emit:t}){const o=r,{fNum:c}=ue(),{t:l}=ve(),{priceFor:v}=_e(),{upToLargeBreakpoint:u}=Le(),{explorerLinks:y}=le(),i=m(()=>[{name:l("action"),id:"action",accessor:"tx",Cell:"actionCell",width:150,sortable:!1},{name:l("details"),id:"details",accessor:"",Cell:"detailsCell",width:325,sortable:!1},{name:l("value"),id:"value",accessor:"value",Cell:"valueCell",align:"right",className:"align-center w-40",sortKey:$=>$.value,width:125},{name:l("time"),id:"timeAgo",accessor:"timestamp",Cell:"timeCell",align:"right",sortKey:$=>$.timestamp,width:200}]),f=m(()=>o.isLoading?[]:Object.entries(xe.groupBy(o.poolSwaps,"tx")).map(([w,T])=>{const{tokenIn:p,tokenOut:h,timestamp:P}=T[0];let C,I;h===o.pool.address?(C="invest",I=l("pool")):p===o.pool.address?(C="withdraw",I=l("withdraw.label")):(C="swap",I=l("swap"));const F=S(T,C),R=n(F,C);return{label:I,type:C,value:R,formattedValue:R>0?c(R,{style:"currency",abbreviate:!0}):"-",timestamp:P,formattedDate:l("timeAgo",[Ze(P)]),tx:w,tokenAmounts:F}}));function n($,w){if(w==="swap"){const p=x($[1].address),h=L($[1].address,$[1].amount);return G(v(p)).times(h).toNumber()}let T=G(0);for(const{address:p,amount:h}of $){const P=x(p),C=L(p,h),I=v(P),F=Math.abs(parseFloat(C.toString()));if(F>0&&I===0)return 0;T=T.plus(G(F).times(I))}return T.toNumber()}function S($,w){const T=w==="invest";if(w==="swap"){const p=$[0],{tokenIn:h,tokenOut:P,tokenAmountIn:C,tokenAmountOut:I}=p;return[{address:h,amount:C},{address:P,amount:I}]}return $.map(p=>({address:T?p.tokenIn:p.tokenOut,amount:T?p.tokenAmountIn:p.tokenAmountOut}))}function x($){var T,p;const w=(p=(T=o.pool)==null?void 0:T.onchain)==null?void 0:p.linearPools;return w!=null&&w[$]!=null?w[$].mainToken.address:$}function L($,w){var p,h;const T=(h=(p=o.pool)==null?void 0:p.onchain)==null?void 0:h.linearPools;return T!=null&&T[$]!=null?G(w).times(T[$].priceRate):G(w)}return($,w)=>{const T=te,p=Te,h=ke,P=eo,C=ge;return s(),b(C,{class:"overflow-x-auto",square:e(u),noBorder:e(u),noPad:""},{default:_(()=>[d(P,{columns:i.value,data:f.value,isLoading:$.isLoading,isLoadingMore:$.isLoadingMore,isPaginated:$.isPaginated,skeletonClass:"h-64",sticky:"both",noResultsLabel:$.noResultsLabel,initialState:{sortColumn:"timeAgo",sortDirection:"desc"},onLoadMore:w[0]||(w[0]=I=>t("loadMore"))},{actionCell:_(I=>[a("div",Es,[a("div",js,[a("div",Hs,[I.type==="invest"?(s(),b(T,{key:0,name:"plus",size:"sm",class:"text-green-500 dark:text-green-400"})):I.type==="withdraw"?(s(),b(T,{key:1,name:"minus",size:"sm",class:"text-red-500"})):(s(),b(T,{key:2,name:"repeat",size:"sm",class:"text-green-500 dark:text-green-400"}))]),a("div",null,k(I.label),1)])])]),detailsCell:_(I=>[a("div",Us,[I.type==="swap"?(s(),B(U,{key:0},[a("div",Gs,[d(p,{address:I.tokenAmounts[0].address,class:"mr-2 shrink-0"},null,8,["address"]),a("span",Ws,k(e(c)(I.tokenAmounts[0].amount,e(J).token)),1)]),d(T,{name:"arrow-right",class:"mx-1"}),a("div",Ys,[d(p,{address:I.tokenAmounts[1].address,class:"mr-2 shrink-0"},null,8,["address"]),a("span",Qs,k(e(c)(I.tokenAmounts[1].amount,e(J).token)),1)])],64)):(s(!0),B(U,{key:1},me(I.tokenAmounts,(F,R)=>(s(),B(U,{key:R},[F.amount!=="0"?(s(),B("div",Ks,[d(p,{address:F.address,class:"mr-2 shrink-0"},null,8,["address"]),a("span",Js,k(e(c)(F.amount,e(J).token)),1)])):V("",!0)],64))),128))])]),valueCell:_(I=>[a("div",Zs,k(I.formattedValue),1)]),timeCell:_(I=>[a("div",Xs,[a("div",ea,[E(k(I.formattedDate)+" ",1),d(h,{href:e(y).txLink(I.tx),external:"",class:"flex items-center ml-2"},{default:_(()=>[d(T,{name:"arrow-up-right",size:"sm",class:"hover:text-blue-600 dark:hover:text-blue-400 transition-colors text-secondary"})]),_:2},1032,["href"])])])]),_:1},8,["columns","data","isLoading","isLoadingMore","isPaginated","noResultsLabel"])]),_:1},8,["square","noBorder"])}}});const ta=se(oa,[["__scopeId","data-v-9c9eccb0"]]),_o=O({__name:"Activities",props:{pool:{},loading:{type:Boolean,default:!1},poolActivityType:{default:K.ALL_ACTIVITY}},setup(r){const t=r,o=t.poolActivityType===K.ALL_ACTIVITY?Do(t.pool.id):qs(t.pool.id),c=m(()=>o.data.value?xe.flatten(o.data.value.pages.map(i=>i.poolSwaps)):[]),l=m(()=>o.isLoading.value),v=m(()=>{var i;return(i=o.hasNextPage)==null?void 0:i.value}),u=m(()=>{var i;return(i=o.isFetchingNextPage)==null?void 0:i.value});function y(){o.fetchNextPage()}return(i,f)=>(s(),b(ta,{poolSwaps:c.value,pool:i.pool,isLoading:i.loading||l.value,isLoadingMore:u.value,isPaginated:v.value,noResultsLabel:i.poolActivityType===e(K).ALL_ACTIVITY?i.$t("poolTransactions.noResults.allTransactions"):i.$t("poolTransactions.noResults.myTransactions"),onLoadMore:y},null,8,["poolSwaps","pool","isLoading","isLoadingMore","isPaginated","noResultsLabel"]))}});function sa(r,t={}){const{networkId:o}=ie(),c=fe(be.Pools.Activities(o,r)),l=async({pageParam:u=0})=>{const y=u===0?j.Pagination.PerPoolInitial:j.Pagination.PerPool,i=await Ae.poolActivities.get({first:y,skip:u,where:{pool:r}});return{poolActivities:i,skip:i.length>=y?u+y:void 0}},v=fe({getNextPageParam:u=>u.skip,...t});return De(c,l,v)}function aa(r,t={}){const{account:o,isWalletReady:c}=le(),{networkId:l}=ie(),v=m(()=>c.value&&o.value!=null),u=fe(be.Pools.UserActivities(l,r,o)),y=async({pageParam:f=0})=>{const n=f===0?j.Pagination.PerPoolInitial:j.Pagination.PerPool,S=await Ae.poolActivities.get({first:n,skip:f,where:{pool:r,sender:o.value.toLowerCase()}});return{poolActivities:S,skip:S.length>=n?f+n:void 0}},i=fe({enabled:v,getNextPageParam:f=>f.skip,...t});return De(u,y,i)}const na={class:"py-2 px-6"},la={class:"flex items-center"},ia={class:"flex mr-3 center"},ra={class:"text-left"},ca={class:"flex flex-wrap py-4 px-6 -mt-1"},ua={key:0,class:"flex items-center p-1 px-2 m-1 bg-gray-50 dark:bg-gray-700 rounded-lg"},da={class:"font-numeric"},pa={class:"flex justify-end py-4 px-6 font-numeric"},ma={class:"py-4 px-6"},fa={class:"flex justify-end items-center text-right whitespace-nowrap wrap"},_a=O({__name:"Table",props:{tokens:{},pool:{},poolActivities:{},isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},loadMore:{},isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""}},emits:["loadMore"],setup(r,{emit:t}){const o=r,{fNum:c}=ue(),{t:l}=ve(),{explorerLinks:v}=le(),{upToLargeBreakpoint:u}=Le(),{getToken:y,priceFor:i}=_e(),f=m(()=>[{name:l("action"),id:"action",accessor:"tx",Cell:"actionCell",width:150,sortable:!1},{name:l("value"),id:"value",accessor:"value",Cell:"valueCell",align:"right",className:"align-center w-40",sortKey:L=>L.value,width:125},{name:l("tokens"),id:"details",accessor:"",Cell:"detailsCell",width:325,sortable:!1},{name:l("time"),id:"timeAgo",accessor:"timestamp",Cell:"timeCell",align:"right",sortKey:L=>L.timestamp,width:200}]),n=m(()=>o.isLoading?[]:o.poolActivities.map(({type:L,timestamp:$,tx:w,amounts:T})=>{const p=wo(o.pool),h=T.filter((I,F)=>F!==p),P=L==="Join",C=S(h);return{label:l(P?"addTokens":"withdraw.label"),value:C,formattedValue:C>0?c(C,{style:"currency",abbreviate:!0}):"-",timestamp:$,formattedDate:l("timeAgo",[Ze($)]),tx:w,type:L,tokenAmounts:x(h)}}));function S(L){let $=G(0);for(let w=0;w<L.length;w++){const T=L[w],p=je(o.tokens[w]),h=y(p),P=i(h==null?void 0:h.address),C=Math.abs(parseFloat(T));if(C>0&&P===0)return 0;$=$.plus(G(C).times(P))}return $.toNumber()}function x(L){return L.map(($,w)=>{const T=je(o.tokens[w]),p=y(T),h=p?p.symbol:T,P=parseFloat($);return{address:T,symbol:h,amount:c(P,J.token)}})}return(L,$)=>{const w=te,T=Te,p=ke,h=eo,P=ge;return s(),b(P,{class:"overflow-x-auto",square:e(u),noBorder:e(u),noPad:""},{default:_(()=>[d(h,{columns:f.value,data:n.value,isLoading:L.isLoading,isLoadingMore:L.isLoadingMore,isPaginated:L.isPaginated,skeletonClass:"h-64",sticky:"both",noResultsLabel:L.noResultsLabel,initialState:{sortColumn:"timeAgo",sortDirection:"desc"},onLoadMore:$[0]||($[0]=C=>t("loadMore"))},{actionCell:_(C=>[a("div",na,[a("div",la,[a("div",ia,[C.type==="Join"?(s(),b(w,{key:0,name:"plus",size:"sm",class:"text-green-500 dark:text-green-400"})):(s(),b(w,{key:1,name:"minus",size:"sm",class:"text-red-500"}))]),a("div",ra,k(C.label),1)])])]),detailsCell:_(C=>[a("div",ca,[(s(!0),B(U,null,me(C.tokenAmounts,(I,F)=>(s(),B(U,{key:F},[I.amount!=="0"?(s(),B("div",ua,[d(T,{address:I.address,class:"mr-2 shrink-0"},null,8,["address"]),a("span",da,k(I.amount),1)])):V("",!0)],64))),128))])]),valueCell:_(C=>[a("div",pa,k(C.formattedValue),1)]),timeCell:_(C=>[a("div",ma,[a("div",fa,[E(k(C.formattedDate)+" ",1),d(p,{href:e(v).txLink(C.tx),external:"",class:"flex items-center ml-2"},{default:_(()=>[d(w,{name:"arrow-up-right",size:"sm",class:"text-gray-500 hover:text-blue-500 transition-colors"})]),_:2},1032,["href"])])])]),_:1},8,["columns","data","isLoading","isLoadingMore","isPaginated","noResultsLabel"])]),_:1},8,["square","noBorder"])}}}),vo=O({__name:"Activities",props:{pool:{},loading:{type:Boolean,default:!1},poolActivityType:{default:K.ALL_ACTIVITY}},setup(r){const t=r,o=t.poolActivityType===K.ALL_ACTIVITY?sa(t.pool.id):aa(t.pool.id),c=m(()=>o.data.value?xe.flatten(o.data.value.pages.map(i=>i.poolActivities)):[]),l=m(()=>o.isLoading.value),v=m(()=>{var i;return(i=o.hasNextPage)==null?void 0:i.value}),u=m(()=>{var i;return(i=o.isFetchingNextPage)==null?void 0:i.value});function y(){o.fetchNextPage()}return(i,f)=>(s(),b(_a,{pool:i.pool,tokens:e(Po)(i.pool),poolActivities:c.value,isLoading:i.loading||l.value,isLoadingMore:u.value,isPaginated:v.value,noResultsLabel:i.poolActivityType===e(K).ALL_ACTIVITY?i.$t("poolTransactions.noResults.allInvestments"):i.$t("poolTransactions.noResults.myInvestments"),onLoadMore:y},null,8,["pool","tokens","poolActivities","isLoading","isLoadingMore","isPaginated","noResultsLabel"]))}}),va={class:"mb-5"},ga=["textContent"],ka={class:"flex justify-between items-end mx-4 lg:mx-0 mb-6 border-b dark:border-gray-900"},ya={key:1,class:"mb-20"},ha=O({__name:"InvestmentTransactions",props:{pool:{},loading:{type:Boolean,default:!1}},setup(r){const t=r,{isWalletReady:o}=le(),c=m(()=>l.value||v.value?[{value:K.ALL_ACTIVITY,label:u("poolTransactions.tabs.allTransactions")},...o.value?[{value:K.USER_ACTIVITY,label:u("poolTransactions.tabs.myTransactions")}]:[]]:[{value:K.ALL_ACTIVITY,label:u("poolTransactions.tabs.allInvestments")},...o.value?[{value:K.USER_ACTIVITY,label:u("poolTransactions.tabs.myInvestments")}]:[]]),{isDeepPool:l,isStablePhantomPool:v}=we(Pe(t,"pool")),{t:u}=ve(),y=ee(c.value[0].value),i=m(()=>l.value||v.value?u("poolActivity"):u("liquidityProvision"));return(f,n)=>{const S=Je;return s(),B("div",va,[a("div",null,[a("h3",{class:"px-4 lg:px-0 mb-3",textContent:k(i.value)},null,8,ga),a("div",ka,[d(S,{modelValue:y.value,"onUpdate:modelValue":n[0]||(n[0]=x=>y.value=x),tabs:c.value,noPad:"",class:"-mb-px"},null,8,["modelValue","tabs"])])]),e(v)||e(l)?(s(),B(U,{key:0},[y.value===e(K).ALL_ACTIVITY?(s(),b(_o,{key:0,poolActivityType:e(K).ALL_ACTIVITY,pool:f.pool,loading:f.loading},null,8,["poolActivityType","pool","loading"])):y.value===e(K).USER_ACTIVITY?(s(),b(_o,{key:1,poolActivityType:e(K).USER_ACTIVITY,pool:f.pool,loading:f.loading},null,8,["poolActivityType","pool","loading"])):V("",!0)],64)):(s(),B("div",ya,[y.value===e(K).ALL_ACTIVITY?(s(),b(vo,{key:0,poolActivityType:e(K).ALL_ACTIVITY,pool:f.pool,loading:f.loading},null,8,["poolActivityType","pool","loading"])):y.value===e(K).USER_ACTIVITY?(s(),b(vo,{key:1,poolActivityType:e(K).USER_ACTIVITY,pool:f.pool,loading:f.loading},null,8,["poolActivityType","pool","loading"])):V("",!0)]))])}}}),ba={class:"py-2 px-6"},wa={class:"flex items-center"},Pa={class:"flex justify-end py-4 px-6 font-numeric"},$a={class:"flex flex-wrap items-center py-4 px-6 -mt-1"},La={class:"token-item"},Ta={class:"font-numeric"},xa={class:"token-item"},Sa={class:"font-numeric"},Ca={class:"py-4 px-6"},Aa={class:"flex justify-end items-center text-right whitespace-nowrap wrap"},Ba=O({__name:"Table",props:{poolSwaps:{},isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},loadMore:{},isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""}},emits:["loadMore"],setup(r,{emit:t}){const o=r,{fNum:c}=ue(),{t:l}=ve(),{priceFor:v}=_e(),{upToLargeBreakpoint:u}=Le(),{explorerLinks:y}=le(),i=m(()=>[{name:l("swapper"),id:"action",accessor:"tx",Cell:"actionCell",width:190,sortable:!1},{name:l("value"),id:"value",accessor:"value",Cell:"valueCell",align:"right",className:"align-center w-40",sortKey:n=>n.value,width:125},{name:l("swapDetails"),id:"details",accessor:"",Cell:"detailsCell",width:310,sortable:!1},{name:l("time"),id:"timeAgo",accessor:"timestamp",Cell:"timeCell",align:"right",sortKey:n=>n.timestamp,width:190}]),f=m(()=>o.isLoading?[]:o.poolSwaps.map(({tokenIn:n,tokenOut:S,tokenAmountIn:x,tokenAmountOut:L,timestamp:$,tx:w,userAddress:T,ensName:p,ensAvatar:h})=>{const P=G(v(S)).times(L).toNumber();return{value:P,formattedValue:P>0?c(P,{style:"currency",abbreviate:!0}):"-",tokenIn:n,tokenOut:S,tokenAmountIn:x,tokenAmountOut:L,timestamp:$,userAddress:T.id,ensName:p,ensAvatar:h,formattedDate:l("timeAgo",[Ze($)]),tx:w}}));return(n,S)=>{const x=Te,L=te,$=ke,w=eo,T=ge;return s(),b(T,{class:"overflow-x-auto",square:e(u),noBorder:e(u),noPad:""},{default:_(()=>[d(w,{columns:i.value,data:f.value,isLoading:n.isLoading,isLoadingMore:n.isLoadingMore,isPaginated:n.isPaginated,skeletonClass:"h-64",sticky:"both",noResultsLabel:n.noResultsLabel,initialState:{sortColumn:"timeAgo",sortDirection:"desc"},onLoadMore:S[0]||(S[0]=p=>t("loadMore"))},{actionCell:_(p=>[a("div",ba,[a("div",wa,[d(x,{class:"mr-2 shrink-0",address:p.userAddress,iconURI:p.ensAvatar,size:30},null,8,["address","iconURI"]),a("span",{class:ae([p.ensName&&"truncate"])},k(p.ensName||e(He)(p.userAddress)),3)])])]),valueCell:_(p=>[a("div",Pa,k(p.formattedValue),1)]),detailsCell:_(p=>[a("div",$a,[a("div",La,[d(x,{address:p.tokenIn,class:"mr-2 shrink-0"},null,8,["address"]),a("span",Ta,k(e(c)(p.tokenAmountIn,e(J).token)),1)]),d(L,{name:"arrow-right",class:"mx-1"}),a("div",xa,[d(x,{address:p.tokenOut,class:"mr-2 shrink-0"},null,8,["address"]),a("span",Sa,k(e(c)(p.tokenAmountOut,e(J).token)),1)])])]),timeCell:_(p=>[a("div",Ca,[a("div",Aa,[E(k(p.formattedDate)+" ",1),d($,{href:e(y).txLink(p.tx),external:"",class:"flex items-center ml-2"},{default:_(()=>[d(L,{name:"arrow-up-right",size:"sm",class:"text-gray-500 hover:text-blue-500 transition-colors"})]),_:2},1032,["href"])])])]),_:1},8,["columns","data","isLoading","isLoadingMore","isPaginated","noResultsLabel"])]),_:1},8,["square","noBorder"])}}});const Ia=se(Ba,[["__scopeId","data-v-d80ad4c2"]]),Va={class:"mb-20"},Na=["textContent"],Ra=O({__name:"SwapTransactions",props:{pool:{},loading:{type:Boolean,default:!1}},setup(r){const o=Do(r.pool.id),c=m(()=>o.data.value?xe.flatten(o.data.value.pages.map(i=>i.poolSwaps)):[]),l=m(()=>o.isLoading.value),v=m(()=>{var i;return(i=o.hasNextPage)==null?void 0:i.value}),u=m(()=>{var i;return(i=o.isFetchingNextPage)==null?void 0:i.value});function y(){o.fetchNextPage()}return(i,f)=>(s(),B("div",Va,[a("h4",{class:"px-4 lg:px-0 mb-5",textContent:k(i.$t("poolTransactions.tabs.swaps"))},null,8,Na),d(Ia,{poolSwaps:c.value,isLoading:i.loading||l.value,isLoadingMore:u.value,isPaginated:v.value,noResultsLabel:i.$t("poolTransactions.noResults.swaps"),onLoadMore:y},null,8,["poolSwaps","isLoading","isLoadingMore","isPaginated","noResultsLabel"])]))}}),Ma=O({__name:"PoolTransactionsCard",props:{pool:{},loading:{type:Boolean,default:!1}},setup(r){const t=r,{isDeepPool:o,isStablePhantomPool:c}=we(Pe(t,"pool"));return(l,v)=>(s(),B(U,null,[d(ha,{pool:l.pool,loading:l.loading},null,8,["pool","loading"]),!e(c)&&!e(o)?(s(),b(Ra,{key:0,pool:l.pool,loading:l.loading},null,8,["pool","loading"])):V("",!0)],64))}}),Da={key:0,class:"table-row"},Fa={class:"table-row-title"},Oa={class:"table-row-value"},za=O({__name:"BalDetailsTable",props:{tableData:{}},setup(r){const{upToLargeBreakpoint:t}=Le();return(o,c)=>{const l=Ce,v=te,u=ke,y=ge;return s(),b(y,{class:"overflow-x-auto",square:e(t),noPad:""},{default:_(()=>[(s(!0),B(U,null,me(o.tableData,(i,f)=>(s(),B(U,{key:f},[i?(s(),B("div",Da,[a("div",Fa,k(i.title),1),a("div",Oa,[E(k(i.value)+" ",1),i.tooltip?(s(),b(l,{key:0,text:i.tooltip,iconSize:"sm",class:"mt-1 ml-2"},null,8,["text"])):V("",!0),i.link?(s(),b(u,{key:1,href:i.link,external:"",noStyle:""},{default:_(()=>[d(v,{name:"arrow-up-right",size:"sm",class:"mt-2 ml-2 text-gray-500 hover:text-blue-500 transition-colors"})]),_:2},1032,["href"])):V("",!0)])])):V("",!0)],64))),128))]),_:1},8,["square"])}}});const qa=se(za,[["__scopeId","data-v-795d110b"]]),Ea={class:"mb-5"},ja=["textContent"],Ha=["textContent"],Ua={class:"px-4 lg:px-0"},Ga=O({__name:"PoolContractDetails",props:{pool:{}},setup(r){const t=r,{t:o}=ve(),{explorerLinks:c}=le(),{fNum:l}=ue();function v(n){return n===j.ZeroAddress?o("poolAttrs.feesFixed"):n===j.DelegateOwner?o("poolAttrs.feesEditableGovernance"):o("poolAttrs.feesEditableOwner")}const u=m(()=>{var P;const{poolType:n,address:S,symbol:x,owner:L,createTime:$,swapFee:w,name:T,id:p,onchain:h}=t.pool;return[{title:o("attribute"),value:o("details")},{title:o("poolName"),value:((P=$o(p))==null?void 0:P.name)||T},{title:o("poolSymbol"),value:x||""},{title:o("poolType"),value:n},h!=null&&h.amp&&Number(h==null?void 0:h.amp)?{title:o("ampFactor.title"),value:h.amp}:null,{title:o("swapFees"),value:`${l(w,{style:"percent",maximumFractionDigits:4})} (${v(L||"")})`},{title:o("poolManager"),value:n===Ee.Managed?o("yes"):o("none")},L?{title:o("poolOwner"),value:y.value.title,link:y.value.link,tooltip:i.value}:null,{title:o("contractAddress"),value:He(S),link:c.addressLink(S||"")},{title:o("createDate"),value:Ve(($||0)*1e3,"dd MMMM yyyy")}]}),y=m(()=>{const{owner:n}=t.pool;return n===j.ZeroAddress?{title:o("noOwner"),link:""}:n===j.DelegateOwner?{title:o("delegateOwner.title"),link:""}:{title:He(n||""),link:c.addressLink(n||"")}}),i=m(()=>t.pool.owner===j.DelegateOwner?o("delegateOwner.tooltip"):""),f=m(()=>t.pool.poolType===Ee.Managed?o(""):t.pool.owner===j.ZeroAddress?o("poolAttrs.immutable"):t.pool.owner===j.DelegateOwner?o("poolAttrs.immutableFeesEditableByGovernance"):o("poolAttrs.immutableFeesEditableByOwner"));return(n,S)=>{const x=qa;return s(),B("div",Ea,[a("h3",{class:"px-4 lg:px-0 mb-5",textContent:k(n.$t("poolDetails"))},null,8,ja),d(x,{class:"mb-12",tableData:e(u)},null,8,["tableData"]),e(f)?(s(),B(U,{key:0},[a("h4",{class:"px-4 lg:px-0 mb-2",textContent:k(n.$t("poolManagement"))},null,8,Ha),a("div",Ua,k(e(f)),1)],64)):V("",!0)])}}}),Wa={key:0,class:"flex"},Ya={class:"flex flex-col"},Qa={class:"mb-3"},Ka={class:"mb-2"},Ja=O({__name:"StakingCardSyncAlert",props:{fiatValueOfStakedShares:{},fiatValueOfUnstakedShares:{},poolAddress:{},poolId:{}},emits:["shouldStakingCardBeOpened"],setup(r,{emit:t}){const o=r,c=ee(!1),l=ee(!1),{networksSyncState:v,shouldPokeGauge:u}=Vt(),{hasNonPrefGaugeBalance:y,poolGauges:i,stakedShares:f}=Se(),{networkId:n}=ie(),{isMismatchedNetwork:S}=le(),{isAffectedBy:x}=Re(m(()=>o.poolId)),{userGaugeShares:L}=ht(),$=m(()=>{var P;const h=(P=L.value)==null?void 0:P.find(C=>C.gauge.poolAddress===o.poolAddress);return!(x(Ue.PoolProtocolFeeVulnWarning)||x(Ue.CspPoolVulnWarning)||!h)}),w=m(()=>{if(y.value){const h="Restake to be eligible for future incentives";let P="";return v.value[n.value]===uo.Unsynced&&(P=`After your veBAL syncs to ${rt[n.value].chainName}, restake to move from the deprecated pool gauge to the new boost-aware pool gauge. If you restake before the veBAL syncs, you’ll need to perform another interaction on the gauge to start receiving your staking boost.`),v.value[n.value]===uo.Synced&&(P="To get your staking boost on this pool, restake to move from the deprecated pool gauge to the new boost-aware pool gauge."),{title:h,text:P}}return null}),T=m(()=>c.value?{title:"You are not getting your max staking boost",text:"You’ve synced new veBAL but it is not being used to increase your staking boost (since pool gauges don’t automatically recognize veBAL changes). Interact with a pool gauge to trigger an update (e.g. by claiming BAL, staking/unstaking or explicitly triggering an update)."}:null);async function p(){var P;if(S.value||Number(f.value)===0)return;const h=(P=i.value)==null?void 0:P.pool.preferentialGauge.id;if(h)try{t("shouldStakingCardBeOpened"),await u(h)&&(c.value=!0)}catch(C){console.log(C)}}return Qe(()=>{p()}),(h,P)=>{const C=he,I=Me;return e($)?(s(),B("div",Wa,[e(T)?(s(),b(I,{key:0,class:"flex-grow",type:"warning",title:e(T).title},{default:_(()=>[a("div",Ya,[a("span",Qa,k(e(T).text),1),a("div",Ka,[d(C,{size:"sm",color:"gradient",onClick:P[0]||(P[0]=F=>l.value=!0)},{default:_(()=>[E(" Trigger update ")]),_:1})])])]),_:1},8,["title"])):e(w)?(s(),b(I,{key:1,class:"flex-grow",type:"tip",title:e(w).title},{default:_(()=>[E(k(e(w).text),1)]),_:1},8,["title"])):V("",!0),d(Nt,{poolId:h.poolAddress,isVisible:e(l),onClose:P[1]||(P[1]=F=>l.value=!1),onSuccess:P[2]||(P[2]=F=>c.value=!1)},null,8,["poolId","isVisible"])])):V("",!0)}}}),Za={class:"relative"},Xa={class:"p-4 w-full hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl transition-colors"},en={class:"relative bg-white dark:bg-gray-850 rounded-b-lg"},on=O({__name:"StakingIncentivesCard",props:{pool:{}},emits:["setRestakeVisibility"],setup(r,{emit:t}){const o=r,c=ee(!1),l=ee("stake"),v=m(()=>o.pool.id),u=ee(!1),{fNum:y}=ue(),{balanceFor:i}=_e(),{isStakablePool:f,isLoading:n,isRefetchingStakedShares:S,stakedShares:x,hasNonPrefGaugeBalance:L,preferentialGaugeAddress:$}=Se(),{isAffected:w}=Re(v),{networkId:T}=ie(),p=m(()=>G(o.pool.totalLiquidity).div(o.pool.totalShares).times((x.value||0).toString()).toString()),h=m(()=>G(o.pool.totalLiquidity).div(o.pool.totalShares).times(i(je(o.pool.address))).toString()),P=m(()=>!!We(o.pool.id)||h.value==="0"||L.value||!$.value);function C(){h.value!=="0"&&(l.value="stake",c.value=!0)}function I(){p.value!=="0"&&(l.value="unstake",c.value=!0)}function F(){c.value=!1}return(R,Z)=>{const g=te,A=$e,N=Ce,M=he,H=Me,W=Vo;return s(),B("div",null,[d(ce,{isVisible:!e(n)},{default:_(()=>[a("div",Za,[d(W,{class:ae(["shadow-2xl",{handle:e(f)}]),sections:[{title:R.$t("staking.stakingIncentives"),id:"staking-incentives",handle:"staking-handle",isDisabled:!e(f)}],reCalcKey:e(L)?0:1,isOpenedByDefault:e(u)},{"staking-handle":_(()=>[a("button",Xa,[d(A,{horizontal:"",justify:"between",align:"center"},{default:_(()=>[d(A,{spacing:"sm",align:"center"},{default:_(()=>[a("div",{class:ae(["flex items-center p-1 text-white rounded-full",{"bg-green-500":e(f),"bg-gray-400":!e(f)}])},[e(f)?(s(),b(g,{key:0,size:"sm",name:"check"})):(s(),b(g,{key:1,size:"sm",name:"x"}))],2),a("h6",null,k(R.$t("staking.stakingIncentives")),1)]),_:1}),e(f)?(s(),b(A,{key:0,horizontal:"",spacing:"sm",align:"center"},{default:_(()=>[d(g,{name:"chevron-down",class:"text-blue-500"})]),_:1})):V("",!0)]),_:1})])]),"staking-incentives":_(()=>[a("div",en,[d(A,{vertical:"",spacing:"sm",class:"p-4 rounded-b-lg border-t dark:border-gray-900"},{default:_(()=>[d(A,{horizontal:"",justify:"between",class:"rounded-b-lg"},{default:_(()=>[a("span",null,k(R.$t("staked"))+" "+k(R.$t("lpTokens")),1),d(A,{horizontal:"",spacing:"sm",align:"center"},{default:_(()=>[d(ce,{isVisible:e(S)},{default:_(()=>[d(ye,{class:"h-5"})]),_:1},8,["isVisible"]),d(ce,{isVisible:!e(S)},{default:_(()=>[a("span",null,k(e(y)(e(p),e(J).fiat)),1)]),_:1},8,["isVisible"]),d(N,{text:R.$t("staking.stakedLpTokensTooltip")},null,8,["text"])]),_:1})]),_:1}),d(A,{horizontal:"",justify:"between"},{default:_(()=>[a("span",null,k(R.$t("unstaked"))+" "+k(R.$t("lpTokens")),1),d(A,{horizontal:"",spacing:"sm",align:"center"},{default:_(()=>[d(ce,{isVisible:e(S)},{default:_(()=>[d(ye,{class:"h-5"})]),_:1},8,["isVisible"]),d(ce,{isVisible:!e(S)},{default:_(()=>[a("span",null,k(e(y)(e(h),e(J).fiat)),1)]),_:1},8,["isVisible"]),d(N,{text:R.$t("staking.unstakedLpTokensTooltip")},null,8,["text"])]),_:1})]),_:1}),e(T)!==e(co).MAINNET?(s(),b(Ja,{key:0,poolAddress:R.pool.address,poolId:R.pool.id,fiatValueOfStakedShares:e(p),fiatValueOfUnstakedShares:e(h),onShouldStakingCardBeOpened:Z[0]||(Z[0]=D=>u.value=!0)},null,8,["poolAddress","poolId","fiatValueOfStakedShares","fiatValueOfUnstakedShares"])):V("",!0),e(L)&&!e(w)?(s(),b(A,{key:1,horizontal:"",spacing:"sm",class:"mt-2"},{default:_(()=>[d(M,{color:"gradient",size:"sm",onClick:Z[1]||(Z[1]=D=>t("setRestakeVisibility",!0))},{default:_(()=>[E(k(R.$t("restake")),1)]),_:1}),d(M,{outline:"",color:"blue",size:"sm",disabled:e(p)==="0",onClick:I},{default:_(()=>[E(k(R.$t("unstake")),1)]),_:1},8,["disabled"])]),_:1})):(s(),b(A,{key:2,horizontal:"",spacing:"sm",class:"mt-2"},{default:_(()=>[d(M,{color:"gradient",size:"sm",disabled:e(P),onClick:C},{default:_(()=>[E(k(R.$t("stake")),1)]),_:1},8,["disabled"]),d(M,{outline:"",color:"blue",size:"sm",disabled:e(p)==="0",onClick:I},{default:_(()=>[E(k(R.$t("unstake")),1)]),_:1},8,["disabled"])]),_:1})),e(L)&&e(T)===e(co).MAINNET?(s(),b(H,{key:3,title:R.$t("staking.restakeGauge"),class:"mt-2"},{default:_(()=>[E(k(R.$t("staking.restakeGaugeDescription")),1)]),_:1},8,["title"])):V("",!0)]),_:1})])]),_:1},8,["class","sections","reCalcKey","isOpenedByDefault"])])]),_:1},8,["isVisible"]),d(ce,{isVisible:e(n),unmountInstantly:""},{default:_(()=>[d(ye,{class:"h-12"})]),_:1},8,["isVisible"]),d(No,{isVisible:e(c),pool:R.pool,action:e(l),onClose:F},null,8,["isVisible","pool","action"])])}}});const tn={key:0},sn={class:"relative"},an={class:"p-4 w-full hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl transition-colors"},nn={class:"flex items-center p-1 text-white bg-green-500 rounded-full"},ln={class:"overflow-visible relative bg-white dark:bg-gray-850 rounded-b-lg"},rn={key:0},cn={key:1,class:"text-red-500"},un=O({__name:"PoolLockingCard",props:{pool:{}},setup(r){const t=r,o=ee(!1),{fNum:c}=ue(),{balanceFor:l}=_e(),{totalLockedValue:v,lock:u,isLoadingLockInfo:y,lockPool:i,lockPoolToken:f}=Ke(),{isWalletReady:n}=le(),{networkSlug:S}=ie(),x=m(()=>G(t.pool.totalLiquidity).div(t.pool.totalShares)),L=m(()=>l(t.pool.address)),$=m(()=>x.value.times(L.value).toString()),w=m(()=>{var p;return(p=u.value)!=null&&p.isExpired?u.value.lockedAmount:"0"}),T=m(()=>{var p,h;return G(((p=i.value)==null?void 0:p.totalLiquidity)||"0").div(((h=i.value)==null?void 0:h.totalShares)||"0").times(w.value).toString()});return(p,h)=>{const P=te,C=$e,I=ye,F=Ce,R=he,Z=ke,g=Vo;return e(n)?(s(),B("div",tn,[d(ce,{isVisible:!e(y)},{default:_(()=>[a("div",sn,[d(g,{class:ae(["shadow-2xl overflow-visible",{"pool-handle":!e(y)}]),sections:[{title:"Locking",id:"locking-module",handle:"locking-handle",isDisabled:e(y)}]},{"locking-handle":_(()=>[a("button",an,[d(C,{horizontal:"",justify:"between",align:"center"},{default:_(()=>[d(C,{spacing:"sm",horizontal:""},{default:_(()=>[a("div",nn,[d(P,{size:"sm",name:"check"})]),d(C,{spacing:"sm",align:"center"},{default:_(()=>[a("h6",null,k(p.$t("locking.lockBptForVeBal")),1)]),_:1})]),_:1}),d(C,{horizontal:"",spacing:"sm",align:"center"},{default:_(()=>[d(P,{name:"chevron-down",class:"text-blue-500"})]),_:1})]),_:1})])]),"locking-module":_(()=>[a("div",ln,[d(C,{vertical:"",spacing:"sm",class:"py-4 px-4 border-t dark:border-gray-900"},{default:_(()=>[d(C,{horizontal:"",justify:"between"},{default:_(()=>{var A;return[(A=e(u))!=null&&A.isExpired?(s(),B("span",cn,k(p.$t("locking.expiredLockLpTokens")),1)):(s(),B("span",rn,k(p.$t("locked"))+" "+k(p.$t("lpTokens")),1)),d(C,{horizontal:"",spacing:"sm",align:"center"},{default:_(()=>{var N;return[d(ce,{isVisible:!1},{default:_(()=>[d(I,{class:"h-5"})]),_:1}),d(ce,{isVisible:!0},{default:_(()=>{var M;return[a("span",{class:ae({"text-red-500":(M=e(u))==null?void 0:M.isExpired})},k(e(c)(e(v),e(J).fiat)),3)]}),_:1}),(N=e(u))!=null&&N.isExpired?(s(),b(F,{key:1,text:p.$t("locking.expiredLockTooltip")},{activator:_(()=>[d(P,{class:"text-red-500",size:"sm",name:"alert-triangle"})]),_:1},8,["text"])):(s(),b(F,{key:0,text:p.$t("locking.lockedLpTokensTooltip")},null,8,["text"]))]}),_:1})]}),_:1}),d(C,{horizontal:"",justify:"between"},{default:_(()=>[a("span",null,k(p.$t("unlocked"))+" "+k(p.$t("lpTokens")),1),d(C,{horizontal:"",spacing:"sm",align:"center"},{default:_(()=>[d(ce,{isVisible:!1},{default:_(()=>[d(I,{class:"h-5"})]),_:1}),d(ce,{isVisible:!0},{default:_(()=>[a("span",null,k(e(c)($.value,e(J).fiat)),1)]),_:1}),d(F,{text:p.$t("locking.unlockedLpTokensTooltip")},null,8,["text"])]),_:1})]),_:1}),d(C,{horizontal:"",spacing:"sm",class:"mt-2"},{default:_(()=>{var A;return[Number(L.value)>0?(s(),b(Z,{key:0,tag:"router-link",to:{name:"get-vebal",query:{returnRoute:p.$route.name,returnParams:JSON.stringify({id:p.pool.id,networkSlug:e(S)})}}},{default:_(()=>[d(R,{disabled:Number(L.value)===0,color:"gradient",size:"sm"},{default:_(()=>[E(k(p.$t("lock")),1)]),_:1},8,["disabled"])]),_:1},8,["to"])):(s(),b(R,{key:1,disabled:Number(L.value)===0,color:"gradient",size:"sm"},{default:_(()=>[E(k(p.$t("lock")),1)]),_:1},8,["disabled"])),(A=e(u))!=null&&A.isExpired?(s(),b(R,{key:2,outline:"",color:"red",size:"sm",onClick:h[0]||(h[0]=N=>o.value=!0)},{default:_(()=>[E(k(p.$t("redeem")),1)]),_:1})):V("",!0)]}),_:1})]),_:1})])]),_:1},8,["class","sections"])])]),_:1},8,["isVisible"]),d(ce,{isVisible:e(y),unmountInstantly:""},{default:_(()=>[d(I,{class:"h-12"})]),_:1},8,["isVisible"]),(s(),b(ft,{to:"#modal"},[o.value&&e(u)&&e(i)&&e(f)?(s(),b(Rt,{key:0,lockablePool:e(i),lockablePoolTokenInfo:e(f),veBalLockInfo:e(u),totalLpTokens:w.value,fiatTotalLpTokens:T.value,onClose:h[1]||(h[1]=A=>o.value=!1)},null,8,["lockablePool","lockablePoolTokenInfo","veBalLockInfo","totalLpTokens","fiatTotalLpTokens"])):V("",!0)]))])):V("",!0)}}});const dn="/assets/apy-vision-a5b6d522.svg";function pn(r){return r.map(t=>t.symbol).join("-")}function mn(){return{apyVisionNetworkName:m(()=>{var t;return(t=To.network.thirdParty.apyVision)==null?void 0:t.networkName}),poolPathSymbolSegment:pn}}const fn={key:0,class:"group flex items-center mt-6 mb-5 w-fit h-fit"},_n=a("img",{width:"32",height:"32",class:"mr-2 rounded-full group-hover:shadow-lg transition",src:dn,alt:""},null,-1),vn=O({__name:"ApyVisionPoolLink",props:{poolId:{},tokens:{}},setup(r){const{poolPathSymbolSegment:t,apyVisionNetworkName:o}=mn();return(c,l)=>{const v=te,u=ke;return e(o)?(s(),B("div",fn,[d(u,{href:"https://app.apy.vision/pools/balancerv2_"+e(o)+"-"+e(t)(c.tokens)+"-"+e(ct)(c.poolId),external:"",noStyle:"",class:"flex items-center font-medium link link-black"},{default:_(()=>[_n,E(" "+k(c.$t("apyvisionPoolInsights"))+" ",1),d(v,{name:"arrow-up-right",size:"sm",class:"ml-0.5 text-gray-500 group-hover:text-blue-500 hover:text-blue-400 transition-colors"})]),_:1},8,["href"])])):V("",!0)}}}),gn=O({name:"GauntletIcon"}),kn={width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg"},yn=_t('<g fill="none" fill-rule="evenodd"><circle fill="#192533" cx="10" cy="10" r="10"></circle><g fill-rule="nonzero"><path d="M11.608 12.19v-2.095H9.453V8h4.31v4.19h-2.155zm2.155-6.285H7.298v6.285H5.143V3.81h8.62v2.095z" fill="#87ABC5"></path><path fill="#87ABC5" d="M13.763 13.029v1.257H7.298V12.19h4.31v-.942h2.155z"></path><path fill="#FFF" d="M15.918 5.905V8h-2.155V5.905z"></path><path fill="#1D252E" d="M7.298 12.19v2.096H5.143V12.19z"></path><path fill="#F07F53" d="M7.298 14.286v2.095H5.143v-2.095z"></path></g></g>',1),hn=[yn];function bn(r,t,o,c,l,v){return s(),B("svg",kn,hn)}const wn=se(gn,[["render",bn]]),Pn={class:"flex flex-col"},$n={class:"flex flex-wrap items-center -mt-2"},Ln={key:0},Tn={class:"pool-title"},xn={class:"text-sm"},Sn={key:1,class:"pool-title"},Cn={class:"flex flex-wrap items-center"},An={class:"ml-2"},Bn={key:0,class:"mt-px ml-1 text-xs font-medium text-gray-400"},In={class:"flex items-center mt-2"},Vn=["innerHTML"],Nn=["innerHTML"],Rn=["innerHTML"],Mn={href:"https://github.com/balancer/frontend-v2/wiki/How-tos#add-a-new-pool",target:"_blank",class:"underline"},Dn={href:"https://github.com/balancer/frontend-v2/wiki/How-tos#add-a-new-pool",target:"_blank",class:"underline"},Fn=O({__name:"PoolPageHeader",props:{loadingApr:{type:Boolean,default:!0},isStableLikePool:{type:Boolean},pool:{},poolApr:{default:void 0},titleTokens:{},missingPrices:{type:Boolean},isLiquidityBootstrappingPool:{type:Boolean},isComposableStableLikePool:{type:Boolean}},emits:["setRestakeVisibility"],setup(r,{emit:t}){const o=r,c=m(()=>Pe(o,"pool").value.id),{isAffected:l,warnings:v}=Re(c),{hasNonApprovedRateProviders:u}=we(Pe(o,"pool")),{fNum:y}=ue(),{t:i}=ve(),{explorerLinks:f}=le(),{balancerTokenListTokens:n,getToken:S}=_e(),{hasNonPrefGaugeBalance:x}=Se(),{disableJoinsReason:L,nonAllowedSymbols:$}=So(o.pool),w=m(()=>{var g;return((g=o.pool)==null?void 0:g.owner)==j.ZeroAddress}),T=m(()=>{var g;return((g=o.pool)==null?void 0:g.owner)==j.DelegateOwner}),p=m(()=>T.value&&j.DynamicFees.Gauntlet.includes(o.pool.id)),h=m(()=>p.value?i("feesManagedByGauntlet"):T.value?i("delegateFeesTooltip"):w.value?i("fixedFeesTooltip"):i("ownerFeesTooltip")),P=m(()=>{var A;if(!o.pool||!((A=o.pool)!=null&&A.swapFee))return"";const g=`${y(o.pool.swapFee,{style:"percent",maximumFractionDigits:4})}`;return w.value?i("fixedSwapFeeLabel",[g]):T.value?p.value?i("dynamicSwapFeeLabel",[g]):i("communitySwapFeeLabel",[g]):i("dynamicSwapFeeLabel",[g])}),C=m(()=>{const g=Object.keys(n.value);return!o.isLiquidityBootstrappingPool&&!o.isComposableStableLikePool&&o.pool.tokensList.some(A=>!xo(g,A))}),I=m(()=>{var A;if(!((A=o.pool)!=null&&A.factory))return"";const g=j.Factories[o.pool.factory];return i(g||"unknownPoolType")}),F=m(()=>$o(o.pool.id)),R=m(()=>!!F.value);function Z(g){var N;const A=o.titleTokens[g];return((N=S(A.address))==null?void 0:N.symbol)||A.symbol||"---"}return(g,A)=>{var re,de,z;const N=Te,M=te,H=ke,W=Ce,D=Me,X=he,Y=$e;return s(),B(U,null,[a("div",Pn,[a("div",$n,[e(R)?(s(),B("div",Ln,[a("h3",Tn,k((re=e(F))==null?void 0:re.name),1),a("h5",xn,k(e(I)),1)])):(s(),B("h3",Sn,k(e(I)),1))]),a("div",Cn,[(s(!0),B(U,null,me(g.titleTokens,({address:Q,weight:oe},pe)=>(s(),B("div",{key:pe,class:"flex items-center px-2 mt-2 mr-2 h-10 bg-gray-50 dark:bg-gray-850 rounded-lg"},[d(N,{address:Q},null,8,["address"]),a("span",An,k(Z(pe)),1),!g.isStableLikePool&&oe&&oe!=="0"?(s(),B("span",Bn,k(e(y)(oe||"0",{style:"percent",maximumFractionDigits:0})),1)):V("",!0)]))),128)),(de=g.pool)!=null&&de.isNew?(s(),b(Ro,{key:0,class:"mt-2 mr-2"})):V("",!0),g.loadingApr?V("",!0):(s(),b(Io,{key:1,pool:g.pool,poolApr:g.poolApr,class:"mt-1 -ml-1"},null,8,["pool","poolApr"])),d(H,{href:e(f).addressLink(((z=g.pool)==null?void 0:z.address)||""),external:"",noStyle:"",class:"flex items-center"},{default:_(()=>[d(M,{name:"arrow-up-right",size:"sm",class:"mt-2 ml-2 text-gray-500 hover:text-blue-500 transition-colors"})]),_:1},8,["href"])]),a("div",In,[a("div",{class:"mr-1 text-sm text-secondary",innerHTML:e(P)},null,8,Vn),d(W,null,{activator:_(()=>[e(p)?(s(),b(H,{key:0,href:e(Mt).Gauntlet.Home,external:""},{default:_(()=>[d(wn)]),_:1},8,["href"])):(s(),b(M,{key:1,name:"info",size:"xs",class:"text-gray-400 dark:text-gray-500"}))]),default:_(()=>[a("span",null,k(e(h)),1)]),_:1})])]),g.pool.isInRecoveryMode&&g.pool.isPaused?(s(),b(D,{key:0,type:"warning",title:g.$t("recoveryMode"),description:g.$t("recoveryModeDescription"),class:"mt-2",block:""},null,8,["title","description"])):V("",!0),e(u)?(s(),b(D,{key:1,type:"warning",title:g.$t("hasNonApprovedRateProviders"),class:"mt-2",block:""},null,8,["title"])):V("",!0),g.missingPrices?(s(),b(D,{key:2,type:"warning",title:g.$t("noPriceInfo"),class:"mt-2",block:""},null,8,["title"])):V("",!0),!e(L).nonVettedTokensAfterTimestamp&&e(C)?(s(),b(D,{key:3,type:"warning",title:g.$t("highRiskPool"),class:"mt-2",block:""},null,8,["title"])):V("",!0),e(x)&&!e(l)&&!e(bo)(g.pool.poolType)?(s(),b(D,{key:4,title:g.$t("staking.restakeGauge"),type:"warning",class:"mt-2"},{default:_(()=>[d(Y,{spacing:"sm"},{default:_(()=>[a("span",null,k(g.$t("staking.restakeGaugeDescription")),1),a("div",null,[d(X,{color:"gradient",class:"p-2",size:"sm",onClick:A[0]||(A[0]=Q=>t("setRestakeVisibility",!0))},{default:_(()=>[E(k(g.$t("restake")),1)]),_:1})])]),_:1})]),_:1},8,["title"])):V("",!0),e(l)?(s(!0),B(U,{key:5},me(e(v),(Q,oe)=>(s(),b(D,{key:`warning-${oe}`,type:"error",class:"mt-2",block:""},{title:_(()=>[a("div",{innerHTML:Q.title},null,8,Nn)]),description:_(()=>[a("div",{innerHTML:Q.description},null,8,Rn)]),_:2},1024))),128)):V("",!0),e(L).notInitialLiquidity?(s(),b(D,{key:6,type:"warning",title:g.$t("noInitLiquidity"),description:g.$t("noInitLiquidityDetail"),class:"mt-2",block:""},null,8,["title","description"])):V("",!0),e(L).nonVettedTokensAfterTimestamp?(s(),b(D,{key:7,type:"warning",title:g.$t("investment.warning.blockedPool.title",[e($)]),class:"mt-2",block:""},{default:_(()=>[E(k(g.$t("investment.warning.blockedPool.description"))+" ",1),a("a",Mn,k(g.$t("here")),1),E(" "+k(g.$t("investment.warning.blockedPool.description2")),1)]),_:1},8,["title"])):V("",!0),e(L).requiresAllowListing||e(L).nonAllowedWeightedPoolAfterTimestamp?(s(),b(D,{key:8,type:"warning",title:g.$t("requiresAllowListing1"),class:"mt-2",block:""},{default:_(()=>[E(k(g.$t("Click"))+" ",1),a("a",Dn,k(g.$t("here")),1),E(" "+k(g.$t("requiresAllowListing2")),1)]),_:1},8,["title"])):V("",!0)],64)}}});const On=se(Fn,[["__scopeId","data-v-06152cde"]]);function zn(r,t={}){const o=Xe.findPool(r),c=Fe(r),{networkId:l}=ie(),v=m(()=>c.data.value),u=m(()=>{var n;return!!((n=v.value)!=null&&n.id)||!!o}),y=be.Pools.APR(l,r),i=async()=>{let n;if(o)n=o;else if(v.value)n={...v.value,tokens:[...v.value.tokens]};else throw new Error("No pool");return n!=null&&n.apr?n.apr:(n.chainId=l.value,await Dt().pools.apr(n))},f=fe({enabled:u,...t});return Ge(y,i,f)}function qn(r,t,o={}){const c=Xe.findPool(r),{networkId:l}=ie(),v=Fe(r),u=m(()=>v.data.value),y=m(()=>{var S;return!!((S=u.value)!=null&&S.id)||!!c}),i=be.Pools.Snapshot(l,r),f=async()=>{var x;if(!u.value&&!c)throw new Error("No pool");const S=(c==null?void 0:c.createTime)||((x=u.value)==null?void 0:x.createTime)||0;return await Ae.poolSnapshots.get({where:{pool:r.toLowerCase(),timestamp_gt:S}})},n=fe({enabled:y,...o});return Ge(i,f,n)}function En(r,t,o={}){const c=Xe.findPool(r),{networkId:l}=ie(),v=Fe(r),u=m(()=>v.data.value),y=m(()=>{var S;return!!((S=u.value)!=null&&S.id)||!!c}),i=be.Pools.HistoricalPrices(l,r),f=async()=>{var w;if(!u.value&&!c)throw new Error("No pool");const S=(c==null?void 0:c.createTime)||((w=u.value)==null?void 0:w.createTime)||0,x=c?io(c):u.value?io(u.value):[],L=t||Ft(new Date,new Date(S*1e3)),$=L<=90?"hour":"day";try{return await $t.prices.getTokensHistorical(x,L,1,$)}catch{return{}}},n=fe({enabled:y,...o});return Ge(i,f,n)}const jn={xave:{id:"xave",title:"brandedRedirect.xave.title",description:"brandedRedirect.xave.description",btnText:"brandedRedirect.xave.btnText",link:"https://app.xave.co/",buildBannerPath:Hn},gyro:{id:"gyro",title:"brandedRedirect.gyro.title",description:"brandedRedirect.gyro.description",btnText:"brandedRedirect.gyro.btnText",link:"https://app.gyro.finance/"}};function Hn(){return new URL("/assets/xave-331a94ce.png",self.location).href}const Un={class:"flex flex-col items-center"},Gn=["src","alt"],Wn={class:"py-4 px-6 w-full"},Yn={class:"mb-1.5 text-lg font-semibold"},Qn={class:"mb-3"},Kn=O({__name:"BrandedRedirectCard",props:{poolType:{}},setup(r){const t=r,o=m(()=>{var u;if(!t.poolType)return;const v=(u=j.BrandedRedirect)==null?void 0:u[t.poolType];if(v)return jn[v]}),c=m(()=>{var v;return typeof((v=o.value)==null?void 0:v.buildBannerPath)=="function"}),l=m(()=>c.value?o.value.buildBannerPath():"");return(v,u)=>{const y=te,i=he,f=ge,n=$e;return e(o)?(s(),b(n,{key:0,vertical:""},{default:_(()=>[d(f,{shadow:"2xl",noPad:"",class:"rounded-xl",growContent:""},{default:_(()=>[a("div",Un,[e(c)?(s(),B("img",{key:0,src:e(l),alt:e(o).title},null,8,Gn)):V("",!0),a("div",Wn,[a("div",Yn,k(v.$t(e(o).title)),1),a("div",Qn,k(v.$t(e(o).description)),1),e(o).link?(s(),b(i,{key:0,color:"blue",block:"",tag:"a",href:e(o).link,target:"_blank",rel:"noopener noreferrer"},{default:_(()=>[E(k(v.$t(e(o).btnText))+" ",1),d(y,{name:"arrow-up-right",size:"sm",class:"ml-2"})]),_:1},8,["href"])):V("",!0)])])]),_:1})]),_:1})):V("",!0)}}}),Jn={class:"flex gap-2 items-center"},Zn=O({__name:"NewPoolData",props:{pool:{}},setup(r){function t(l){return Ko(l.id)?[l.address]:Jo(l)}const{networkSlug:o}=ie(),c=ee(!1);return(l,v)=>{const u=zt,y=te,i=Ye("router-link");return s(),b(i,{as:"div",to:{name:"pool",params:{id:l.pool.id,networkSlug:e(o)}},class:"flex justify-between items-center py-3 pl-1 transition-all cursor-pointer hover:bg-[#11182766]",onMouseleave:v[0]||(v[0]=f=>c.value=!1),onMouseover:v[1]||(v[1]=f=>c.value=!0)},{default:_(()=>[a("div",Jn,[d(u,{addresses:t(l.pool),width:60},null,8,["addresses"]),d(qt,{tokens:e(Lo)(l.pool,l.pool.tokens),isOnMigrationCard:"",isHovered:e(c)},null,8,["tokens","isHovered"]),l.pool.isNew?(s(),b(Ro,{key:0,class:"mb-1"})):V("",!0)]),d(y,{name:"arrow-right",size:"sm",class:ae(["arrow",{"arrow-hovered":e(c)}])},null,8,["class"])]),_:1},8,["to"])}}});const go=se(Zn,[["__scopeId","data-v-bba5e894"]]);const Xn={};function el(r,t){const o=ge;return s(),b(o,{shadow:"2xl",noPad:"",class:"bg-cover rounded-xl gradients",growContent:""},{default:_(()=>[Ao(r.$slots,"default",{},void 0,!0)]),_:3})}const ol=se(Xn,[["render",el],["__scopeId","data-v-5f80dfa3"]]),tl={class:"flex flex-col items-center text-white"},sl={class:"container pt-5"},al={class:"mb-2 text-3xl font-bold text-opacity-90"},nl={class:"mb-3 text-sm font-medium text-opacity-80"},ll={key:0,class:"no-pad"},il={class:"pb-3 mx-5 font-bold border-b border-gray-300 border-opacity-25 no-pad pools"},rl={key:1,class:"no-pad"},cl={class:"pb-3 mx-5 font-bold border-b border-gray-300 border-opacity-25 no-pad"},ul={class:"no-pad"},dl={key:2,class:"flex py-3"},pl=O({__name:"PoolMigrationCard",props:{poolId:{}},setup(r){var p;const t=r,{networkSlug:o}=ie(),{t:c}=ve(),l=m(()=>We(t.poolId)||Zo(t.poolId)||Xo(t.poolId)),v=m(()=>{var h;return!!((h=l.value)!=null&&h.newPool)}),u=Fe((p=l.value)==null?void 0:p.newPool,v),y=m(()=>{var h,P;return!!((P=(h=l.value)==null?void 0:h.suggestedPools)!=null&&P.length)}),i=m(()=>{var h;return{poolIds:(h=l.value)==null?void 0:h.suggestedPools}}),f=It(i),n=m(()=>u&&u.isLoading.value),S=m(()=>{if(u)return u.data.value}),x=m(()=>f&&f.isLoading.value),L=m(()=>{var h,P;if(f)return(P=(h=f.data.value)==null?void 0:h.pages)==null?void 0:P[0].pools}),$=m(()=>v.value&&n.value||y.value&&x.value),w=m(()=>{var P;const h=(P=l.value)==null?void 0:P.description;return c(h||"migrateCard.description")}),T=m(()=>{var P;const h=(P=l.value)==null?void 0:P.title;return c(h||"migrateCard.title")});return(h,P)=>{const C=ye,I=he,F=$e;return e($)?(s(),b(C,{key:0,class:"mb-4 h-60 pool-actions-card"})):(s(),b(F,{key:1,vertical:""},{default:_(()=>[d(ol,null,{default:_(()=>[a("div",tl,[a("div",sl,[a("div",al,k(e(T)),1),a("div",nl,k(e(w)),1),e(S)?(s(),B("div",ll,[a("div",il,k(h.$t("migrateCard.upgradedPool")),1),d(go,{pool:e(S)},null,8,["pool"])])):e(L)?(s(),B("div",rl,[a("div",cl,k(h.$t("migrateCard.recommendedPool")),1),a("div",ul,[(s(!0),B(U,null,me(e(L),R=>(s(),b(go,{key:R.id,pool:R},null,8,["pool"]))),128))])])):(s(),B("div",dl,[d(I,{class:"flex-grow hover:!text-white",color:"transparent",outline:"",label:h.$t("migrateCard.viewBtn"),onClick:P[0]||(P[0]=R=>h.$router.push({name:"vebal",params:{networkSlug:e(o)}}))},null,8,["label"])]))])])]),_:1})]),_:1}))}}});const ml=se(pl,[["__scopeId","data-v-926e4f33"]]),Fo={[q.General]:"General Symmetric protocol risks",[q.Weighted]:"Weighted pool risks",[q.Stable]:"Stable pool risks",[q.ComposableStable]:"Composable stable pool risks",[q.MetaStable]:"MetaStable pool risks",[q.Boosted]:"Boosted pool risks",[q.Arbitrum]:"Layer 2 network risks: Arbitrum",[q.Polygon]:"Layer 2 network risks: Polygon",[q.Optimism]:"Layer 2 network risks: Optimism",[q.Gnosis]:"Layer 2 network risks: Gnosis",[q.Mutable]:"Mutable attributes risks",[q.Composability]:"Composability risks",[q.RateProvider]:"Rate provider risks",[q.RateProviderBridge]:"Rate provider cross-chain bridge risks: Layer Zero"};function ne(r,t){return{title:t||Fo[r],hash:`#${r}`}}const fl=ne(q.Weighted),_l=ne(q.Stable),vl=ne(q.ComposableStable,"Composable Stable pool risks"),gl=ne(q.ComposableStable,Fo[q.MetaStable]),kl=ne(q.Boosted),yl=ne(q.Arbitrum),hl=ne(q.Polygon),bl=ne(q.Optimism),wl=ne(q.Gnosis),Pl=ne(q.Mutable);function $l(r){const t=[];if(et(r.poolType)&&t.push(fl),ot(r.poolType)&&t.push(_l),tt(r.poolType)&&t.push(vl),st(r.poolType)&&t.push(gl),at(r)){t.push(kl);const o=Ll(r);o&&t.push(o)}return ut.value&&t.push(yl),dt.value&&t.push(bl),pt.value&&t.push(hl),mt.value&&t.push(wl),Tl(r)&&t.push(Pl),t.push(ne(q.General)),t}function Ll(r){const t=nt(r);if(t!=null&&t.includes(Ie.Tetu)||t!=null&&t.includes(Ie.Idle))return ne(q.Composability,"Third party DeFi composability risks: May use multiple yield protocols");if(t!=null&&t.includes(Ie.Reaper)&&t.push(Ie.Granary),t)return ne(q.Composability,`Third party DeFi composability risks: ${t.map(o=>xe.capitalize(o)).join(", ")}`)}function Tl(r){return![void 0,j.ZeroAddress].includes(r==null?void 0:r.owner)}function xl(r){return`Liquidity Providers in this pool${Sl(r)} face the following risks:`}function Sl(r){return Oo(r).length>0?" also":""}function Oo(r){var o,c;const t=(c=(o=j)==null?void 0:o.Risks)==null?void 0:c[r.id.toLowerCase()];return t?t.map(l=>ne(l)):[]}const Cl={class:"px-8 lg:px-4 list-disc"},ko=O({__name:"PoolRiskList",props:{risks:{}},setup(r){return(t,o)=>{const c=Ye("router-link");return s(),B("ul",Cl,[(s(!0),B(U,null,me(t.risks,({title:l,hash:v})=>(s(),B("li",{key:v,class:"mb-1 link"},[d(c,{to:{name:"risks",hash:v}},{default:_(()=>[E(k(l),1)]),_:2},1032,["to"])]))),128))])}}}),Al={id:"risks-section"},Bl=["textContent"],Il={class:"px-4 lg:px-0 mb-3"},Vl=O({__name:"PoolRisks",props:{pool:{}},setup(r){const t=r,o=Oo(t.pool),c=$l(t.pool),l=o.length>0;return(v,u)=>(s(),B("div",Al,[a("h3",{class:"px-4 lg:px-0 mb-3",textContent:k(v.$t("poolRisks.title"))},null,8,Bl),l?(s(),b(ko,{key:0,risks:e(o),class:"mb-3"},null,8,["risks"])):V("",!0),a("p",Il,k(e(xl)(v.pool)),1),d(ko,{risks:e(c)},null,8,["risks"])]))}}),Nl=r=>(kt("data-v-36d9526a"),r=r(),yt(),r),Rl={class:"xl:container lg:px-4 pt-8 xl:mx-auto"},Ml={class:"grid grid-cols-1 lg:grid-cols-3 gap-x-0 lg:gap-x-4 xl:gap-x-8 gap-y-8"},Dl={class:"col-span-2 px-4 lg:px-0"},Fl=Nl(()=>a("div",{class:"hidden lg:block"},null,-1)),Ol={class:"order-2 lg:order-1 col-span-2"},zl={class:"grid grid-cols-1 gap-y-8"},ql={class:"px-4 lg:px-0"},El={class:"px-4 lg:px-0 mb-4"},jl={class:"mb-4"},Hl=["textContent"],Ul={class:"order-1 lg:order-2 px-4 lg:px-0"},Gl={key:1},Wl=O({__name:"_id",setup(r){const t=bt();wt(t);const o=zo(),c=yo(),l=o.params.id.toLowerCase(),v=ee(!1),{prices:u,priceQueryLoading:y}=_e(),{isWalletReady:i}=le(),f=Ne(l),{pool:n,isLoadingPool:S}=Et();console.log("pool",n);const{isStableLikePool:x,isLiquidityBootstrappingPool:L,isComposableStableLikePool:$,isDeprecatedPool:w,isNewPoolAvailable:T}=we(n),p=m(()=>S.value||!n.value),h=qn(l,void 0,{refetchOnWindowFocus:!1}),P=m(()=>h.isLoading.value),C=m(()=>h.data.value),I=En(l,void 0,{refetchOnWindowFocus:!1}),F=m(()=>I.data.value),R=zn(l),Z=m(()=>R.isLoading.value||Boolean(R.error.value)),g=m(()=>R.data.value),A=ee(null),N=ee(!1);let M;function H(){if(!("IntersectionObserver"in window)||!("IntersectionObserverEntry"in window)||!A.value){N.value=!0;return}const Q={rootMargin:"-100px"},oe=pe=>{pe.forEach(Oe=>{Oe.isIntersecting&&(N.value=!0)})};M=new IntersectionObserver(oe,Q),M.observe(A.value)}async function W(){N.value=!0,await Bo(),c.push({path:o.fullPath,hash:"#risks-section"})}Qe(()=>{H()}),vt(()=>{M==null||M.disconnect()});const D=m(()=>{if(n.value&&u.value&&!y.value){const Q=Object.keys(u.value);return!lt(n.value.tokens).every(pe=>xo(Q,pe))}return!1}),X=m(()=>!n.value||!n.value.tokens?[]:Lo(n.value,n.value.tokens)),Y=m(()=>j.Stakable.VotingGaugePools.includes(l)||j.Stakable.AllowList.includes(l)),re=m(()=>n.value?wo(n.value)??null:null),de=m(()=>{var Q;return n.value&&((Q=j.BrandedRedirect)==null?void 0:Q[n.value.poolType])||!1});function z(Q){v.value=Q}return gt(()=>n.value,()=>{n.value&&Ot.setMeta(o,n.value)}),(Q,oe)=>{var oo,to;const pe=ye,Oe=$e;return s(),B("div",Rl,[a("div",Ml,[a("div",Dl,[e(p)||!e(n)?(s(),b(pe,{key:0,class:"header-loading-block"})):(s(),b(On,{key:1,loadingApr:e(Z),pool:e(n),poolApr:e(g),isStableLikePool:e(x),titleTokens:e(X),missingPrices:e(D),isLiquidityBootstrappingPool:e(L),isComposableStableLikePool:e($),onSetRestakeVisibility:z},null,8,["loadingApr","pool","poolApr","isStableLikePool","titleTokens","missingPrices","isLiquidityBootstrappingPool","isComposableStableLikePool"]))]),Fl,a("div",Ol,[a("div",zl,[a("div",ql,[d(e(Ds),{historicalPrices:e(F),snapshots:e(C),loading:e(P),totalLiquidity:(oo=e(n))==null?void 0:oo.totalLiquidity,tokensList:e(n)?e(Po)(e(n)):[],poolType:(to=e(n))==null?void 0:to.poolType,poolPremintedBptIndex:e(re)},null,8,["historicalPrices","snapshots","loading","totalLiquidity","tokensList","poolType","poolPremintedBptIndex"])]),a("div",El,[d(e(zs),{pool:e(n),poolApr:e(g),loading:e(p),loadingApr:e(Z)},null,8,["pool","poolApr","loading","loadingApr"]),!e(p)&&e(n)?(s(),b(vn,{key:0,poolId:e(n).id,tokens:e(X)},null,8,["poolId","tokens"])):V("",!0)]),a("div",jl,[a("h3",{class:"px-4 lg:px-0 mb-3",textContent:k(Q.$t("poolComposition.title"))},null,8,Hl),e(p)?(s(),b(pe,{key:0,class:"h-64"})):e(n)?(s(),b(e(vs),{key:1,pool:e(n)},null,8,["pool"])):V("",!0)]),a("div",{ref_key:"intersectionSentinel",ref:A},null,512),e(N)&&e(n)?(s(),B(U,{key:0},[d(e(Ma),{pool:e(n),loading:e(p)},null,8,["pool","loading"]),d(e(Ga),{pool:e(n)},null,8,["pool"]),d(Vl,{pool:e(n)},null,8,["pool"])],64)):V("",!0)])]),a("div",Ul,[d(Oe,{vertical:""},{default:_(()=>{var Be;return[e(de)&&e(n)?(s(),b(Kn,{key:0,poolType:(Be=e(n))==null?void 0:Be.poolType},null,8,["poolType"])):(s(),B("div",Gl,[e(p)||!e(n)?(s(),b(pe,{key:0,class:"mb-4 h-60 pool-actions-card"})):e(L)?V("",!0):(s(),b(e(Xt),{key:1,pool:e(n),missingPrices:e(D),class:"mb-4",onRisksClicked:oe[0]||(oe[0]=Yl=>W())},null,8,["pool","missingPrices"]))])),e(p)?(s(),b(pe,{key:2,class:"h-40 pool-actions-card"})):V("",!0),e(Y)&&!e(p)&&e(n)&&e(i)?(s(),b(on,{key:3,pool:e(n),class:"staking-incentives",onSetRestakeVisibility:z},null,8,["pool"])):V("",!0),e(f)&&!e(p)&&e(n)?(s(),b(un,{key:4,pool:e(n),class:"pool-locking"},null,8,["pool"])):V("",!0),e(l)&&e(i)&&(e(w)||e(T))?(s(),b(ml,{key:5,poolId:e(l)},null,8,["poolId"])):V("",!0)]}),_:1})]),e(n)?(s(),b(No,{key:0,isVisible:e(v),pool:e(n),action:"restake",onClose:oe[1]||(oe[1]=Be=>v.value=!1),onSuccess:oe[2]||(oe[2]=Be=>v.value=!1)},null,8,["isVisible","pool"])):V("",!0)])])}}});const vr=se(Wl,[["__scopeId","data-v-36d9526a"]]);export{vr as default};
//# sourceMappingURL=_id-98879478.js.map
