import{au as g,aq as x,at as y,aw as v}from"./BalBtn-cca6788c.js";import{a as C,b as h}from"./useTransactions-114fc9d7.js";import{d as B,r as T,u as t,b as F,c as L,z as e}from"./runtime-core.esm-bundler-558f8953.js";const W=B({__name:"TxActionBtn",props:{actionFn:{},action:{},summary:{},confirmingLabel:{},onConfirmFn:{},disabled:{type:Boolean,default:!1},disableNotification:{type:Boolean}},emits:["init","confirming","confirmed","failed"],setup(r,{emit:i}){const n=r,{t:l}=g(),{addTransaction:d}=C(),{txListener:f}=h(),{isMismatchedNetwork:m}=x(),a=T(0),s=t(()=>a.value===1),u=t(()=>a.value===2),p=t(()=>s.value?l("confirm"):n.confirmingLabel);async function b(){try{a.value=1,i("init");const o=await n.actionFn();a.value=2,i("confirming",o),n.disableNotification||d({id:o.hash,type:"tx",action:n.action,summary:n.summary}),await f(o,{onTxConfirmed:async c=>{n.onConfirmFn&&n.onConfirmFn(),a.value=3,i("confirmed",c)},onTxFailed:()=>{console.error("Tx failed"),a.value=0,i("failed")}})}catch(o){a.value=0,console.error(o)}}return(o,c)=>{const _=v;return F(),L(_,{loadingLabel:e(p),loading:e(s)||e(u),disabled:n.disabled||e(m),onClick:y(b,["stop"])},null,8,["loadingLabel","loading","disabled","onClick"])}}});export{W as _};
//# sourceMappingURL=TxActionBtn.vue_vue_type_script_setup_true_lang-663c84ee.js.map
