var o=Object.defineProperty;var l=(s,r,t)=>r in s?o(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var a=(s,r,t)=>(l(s,typeof r!="symbol"?r+"":r,t),t);import{aO as n,aQ as u}from"./BalBtn-cca6788c.js";import{Q as c}from"./connector-16147cef.js";import{r as h,u as g}from"./runtime-core.esm-bundler-558f8953.js";const m="https://gateway.thegraph.com";class f{constructor(r=c.subgraphUrls||[]){a(this,"urlIndex",h(0));a(this,"url",g(()=>this.urls[this.urlIndex.value]));this.urls=r,console.log(r)}async get(r){var t;if(!r)throw new Error("Payload is required");try{const e=await n.post(this.url.value,r);console.log(e);const i=(t=e==null?void 0:e.data.errors)==null?void 0:t.message;if(i)throw new Error(i);return e}catch(e){if(this.url.value.startsWith(m)&&u({error:e,msgPrefix:`GraphQL request to [${this.url.value}] failed with message: ${e==null?void 0:e.message}`,context:{extra:{Payload:`${JSON.stringify(r)}`}}}),this.urlIndex.value+1===this.urls.length)throw e;return this.incrementUrlIndex(),this.get(r)}}incrementUrlIndex(){this.urlIndex.value+=1}}const w=new f;export{w as s};
//# sourceMappingURL=subgraph-fallback.service-7e7c32be.js.map
