import{B as Be,_ as Ee}from"./BalAsset-fcab7531.js";import{C as we}from"./Col3Layout-f6c1dd97.js";import{u as Pe}from"./usePoolQuery-7e1952e9.js";import{b as ne,u as _e}from"./useVeBalLockInfoQuery-e92ea085.js";import{u as $e}from"./useBreakpoints-ee2a85bc.js";import{bp as Z,bz as re,br as Ve,bq as De,b$ as xe,au as Q,ao as J,av as ee,aS as j,aU as D,bn as ve,b4 as Ie,ax as Ce,aq as ue,aQ as Se,c0 as Me,aw as fe}from"./BalBtn-cca6788c.js";import{f as G,u as oe,g as Le,i as Ne}from"./useVeBAL-5fa15e49.js";import{_ as Fe}from"./BalAccordion.vue_vue_type_script_setup_true_lang-a2418c88.js";import{_ as me}from"./BalLink-65772d8f.js";import{u as de,Z as K,Q as Oe}from"./connector-16147cef.js";import{d as E,u as k,b as s,c as v,l as h,q as t,v as u,j as T,A as S,z as c,p as b,k as X,F as x,aj as be,al as Re,r as V,C as Ke,ap as ge,i as F,ah as Te,ao as je,T as qe}from"./runtime-core.esm-bundler-558f8953.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import{_ as We}from"./MyVeBAL.vue_vue_type_script_setup_true_lang-44832444.js";import{M as Qe,a as Xe,P as ce,I as ze}from"./constants-5d025550.js";import{s as ie}from"./index-155f0d25.js";import{g as He,n as Ue,u as Ye}from"./useVotingPools-44058ee3.js";import{_ as Ge}from"./balancer-sdk-d0995fe4.js";import{_ as Ze}from"./BalCircle-324fa9cd.js";import{_ as Je}from"./BalAlert-fdfde589.js";import{_ as eo}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-f37eca6e.js";import{a as oo,b as to}from"./useTransactions-114fc9d7.js";import{u as lo,A as ao}from"./useTokenApprovalActions-42c413d9.js";import{u as no}from"./cross-chain-sync.provider-360a4a87.js";import{_ as so}from"./BalTooltip.vue_vue_type_style_index_0_lang-8bf6235c.js";import{_ as co}from"./TokenInput.vue_vue_type_script_setup_true_lang-16ac0e09.js";import{_ as io}from"./BalTextInput-57c2e4cc.js";import"./useDarkMode-6a81be08.js";import"./browser-6c45db04.js";import"./_commonjsHelpers-87174ba5.js";import"./Avatar.vue_vue_type_script_setup_true_lang-5ab9890e.js";import"./api-e32fdf3d.js";import"./usePoolHelpers-eb955974.js";import"./pools-18fd7fb0.js";import"./subgraph-fallback.service-7e7c32be.js";import"./index-18b6daea.js";import"./StablePhantomPool-f25cd4a4.js";import"./balancer-api.service-037872f8.js";import"./metamask.connector-0225016b.js";import"./useQueryHelpers-8fe10019.js";import"./BalStack.vue_vue_type_script_lang-342e535e.js";import"./wallet-logos-346092ca.js";import"./anime.es-de4e5aa0.js";import"./index-fe1d1633.js";import"./events-5f626723.js";import"./readable-browser-a0df197a.js";import"./immutable-2b056f5a.js";import"./index-1de0572e.js";import"./useGraphQuery-d0a03aea.js";import"./tailwind.config-235e68cf.js";import"./helpers-7076a817.js";import"./SelectTokenModal-1ed87681.js";import"./index.esm-d99d5267.js";import"./validations-969b3a37.js";import"./numeral-77821a11.js";function se(a,o){Z(2,arguments);var e=Ve(o),n=e*7;return re(a,n)}function ro(a){return Z(1,arguments),De(a).getDay()===4}function uo(a,o){Z(2,arguments);var e=He(a)-o;return e<=0&&(e+=7),xe(a,e)}function mo(a){return Z(1,arguments),uo(a,4)}const ko={class:"group flex justify-between items-center p-4 w-full rounded-xl"},po={class:"group-hover:text-blue-500 transition-colors"},_o={class:"p-4 border-t dark:border-gray-900"},vo={class:"text-secondary"},fo={class:"text-sm steps"},Lo=["innerHTML"],bo=E({__name:"HowToLock",props:{lockablePool:{},lockablePoolTokenInfo:{}},setup(a){const o=a,{t:e}=Q(),{networkSlug:n}=de(),m=k(()=>[e("getVeBAL.howToLock.steps.lock",[o.lockablePoolTokenInfo.symbol]),e("getVeBAL.howToLock.earn.boost"),e("getVeBAL.howToLock.earn.voting")]);return(l,d)=>{const i=J,p=me,_=Fe;return s(),v(_,{class:"mt-4",showSectionBorder:!1,sections:[{title:l.$t("getVeBAL.howToLock.title"),id:"how-to-lock",handle:"how-to-lock-handle"}]},{"how-to-lock-handle":h(()=>[t("button",ko,[t("h6",po,u(l.$t("getVeBAL.howToLock.title")),1),T(i,{name:"chevron-down",class:"text-blue-500 group-hover:text-pink-500 transition-colors"})])]),"how-to-lock":h(()=>[t("div",_o,[t("div",vo,[t("ol",fo,[t("li",null,[S(u(l.$t("getVeBAL.howToLock.steps.investPart1"))+" ",1),T(p,{tag:"router-link",to:{name:"add-liquidity",params:{networkSlug:c(n),id:l.lockablePool.id}},external:""},{default:h(()=>[S(u(l.lockablePoolTokenInfo.symbol),1)]),_:1},8,["to"]),S(" "+u(l.$t("getVeBAL.howToLock.steps.investPart2")),1)]),(s(!0),b(x,null,X(m.value,(r,L)=>(s(),b("li",{key:L,innerHTML:r},null,8,Lo))),128))])])])]),_:1},8,["sections"])}}});const pe=z(bo,[["__scopeId","data-v-a3e7b1aa"]]),go={class:"p-4 w-full border-b dark:border-gray-900"},To={class:"p-4 -mt-2"},ho={class:"flex justify-between"},yo={class:"flex justify-between text-secondary"},Ao=E({__name:"LockableTokens",props:{lockablePool:{},lockablePoolTokenInfo:{},veBalLockInfo:{}},setup(a){const o=a,{balanceFor:e}=ee(),{fNum:n}=j(),{networkSlug:m}=de(),l=k(()=>e(o.lockablePool.address)),d=k(()=>K(o.lockablePool.totalLiquidity).div(o.lockablePool.totalShares).times(l.value).toString());return(i,p)=>{const _=me,r=ve;return s(),v(r,{noPad:"",shadow:"none"},{default:h(()=>[t("div",go,[t("h6",null,u(i.$t("getVeBAL.lockableTokens.title")),1)]),t("div",To,[t("div",ho,[t("div",null,u(i.lockablePoolTokenInfo.symbol),1),t("div",null,u(c(n)(l.value,c(D).token)),1)]),t("div",yo,[t("div",null,u(i.lockablePoolTokenInfo.name),1),t("div",null,u(c(n)(d.value,c(D).fiat)),1)]),T(_,{tag:"router-link",to:{name:"add-liquidity",params:{networkSlug:c(m),id:i.lockablePool.id}},external:"",class:"block mt-2 text-sm"},{default:h(()=>[S(u(i.$t("getVeBAL.lockableTokens.getMoreVeBAL",[i.lockablePoolTokenInfo.symbol])),1)]),_:1},8,["to"])])]),_:1})}}});var B=(a=>(a.CREATE_LOCK="createLock",a.EXTEND_LOCK="extendLock",a.INCREASE_LOCK="increaseLock",a))(B||{});const he=be({lockAmount:"",lockEndDate:""});function Bo(){he.lockAmount=""}function q(){return{...Re(he),resetState:Bo}}function Eo(a){const{lockAmount:o}=q(),e=k(()=>K(o.value||"0").gt(0)),n=k(()=>{var l;return((l=a==null?void 0:a.value)==null?void 0:l.hasExistingLock)&&e.value}),m=k(()=>{var l;return(l=a==null?void 0:a.value)!=null&&l.hasExistingLock?K(a.value.lockedAmount).plus(o.value||"0").toString():o.value||"0"});return{isValidLockAmount:e,isIncreasedLockAmount:n,totalLpTokens:m}}function wo(a){const o=re(a,Xe),e=ro(o)?o:mo(o);return ie(e).getTime()}function Po(a){const o=Ie(new Date),e=ie(Ue(re(a!=null&&a.hasExistingLock?a.lockedEndDate:o,Qe))).getTime(),n=wo(o),{lockEndDate:m}=q(),l=k(()=>m.value===""?0:ie(new Date(m.value)).getTime()),d=k(()=>l.value>=e&&l.value<=n),i=k(()=>(a==null?void 0:a.hasExistingLock)&&d.value);return{todaysDate:o,minLockEndDateTimestamp:e,maxLockEndDateTimestamp:n,isValidLockEndDate:d,isExtendedLockEndDate:i}}const $o={class:"flex items-center"},Vo={class:"ml-2"},Do=E({__name:"LockActions",props:{lockablePoolTokenInfo:{},lockAmount:{},lockEndDate:{},lockType:{},lockConfirmed:{type:Boolean},veBalLockInfo:{}},emits:["success"],setup(a,{emit:o}){const e=a,n=V(!0),m=be(e.lockType.map(()=>({init:!1,confirming:!1,confirmed:!1,confirmedAt:""}))),{t:l}=Q(),{networkConfig:d}=Ce(),{getProvider:i,explorerLinks:p,isMismatchedNetwork:_}=ue(),{addTransaction:r}=oo(),{txListener:L,getTxConfirmedAt:A}=to(),{fNum:w}=j(),{totalVotes:I,unallocatedVotes:O}=Ye(),{networkSlug:P}=de(),{getTokenApprovalActions:M}=lo(),{refetch:H}=no(),U=e.lockType.map((f,$)=>({label:l(`getVeBAL.previewModal.actions.${f}.label`,[G(new Date(e.lockEndDate),ce)]),loadingLabel:l(`getVeBAL.previewModal.actions.${f}.loadingLabel`),confirmingLabel:l(`getVeBAL.previewModal.actions.${f}.confirming`),action:()=>te(f,$),stepTooltip:l(`getVeBAL.previewModal.actions.${f}.tooltip`)})),R=V([...U]),N=k(()=>m.every(f=>f.confirmed)),g=k(()=>I!==O.value),C=k(()=>[{address:e.lockablePoolTokenInfo.address,amount:e.lockAmount}]);async function Y(f,$,y){r({id:f.hash,type:"tx",action:$,summary:$===B.EXTEND_LOCK?l("transactionSummary.extendLock",[G(new Date(e.lockEndDate),ce)]):`${w(e.lockAmount,D.token)} ${e.lockablePoolTokenInfo.symbol}`,details:{lockAmount:e.lockAmount,lockEndDate:e.lockEndDate,lockType:$}}),m[y].confirmed=await L(f,{onTxConfirmed:async W=>{m[y].confirming=!1,m[y].receipt=W;const le=await A(W);m[y].confirmedAt=Me(le),H()},onTxFailed:()=>{m[y].confirming=!1}})}async function te(f,$){try{let y;if(m[$].init=!0,f===B.CREATE_LOCK)y=await ne.veBAL.createLock(i(),e.lockAmount,e.lockEndDate);else if(f===B.EXTEND_LOCK)y=await ne.veBAL.extendLock(i(),e.lockEndDate);else if(f===B.INCREASE_LOCK)y=await ne.veBAL.increaseLock(i(),e.lockAmount);else throw new Error("Unsupported lockType provided");return m[$].init=!1,m[$].confirming=!0,console.log("Receipt",y),Y(y,f,$),y}catch(y){return Se({error:y,context:{level:"fatal",extra:{lockType:f,props:e}}}),Promise.reject(y)}}return Ke(N,()=>{N.value&&o("success",m)}),ge(async()=>{const f=await M({amountsToApprove:C.value,spender:d.addresses.veBAL,actionType:ao.Locking,forceMax:!1});R.value.unshift(...f),n.value=!1}),(f,$)=>{const y=eo,W=J,le=me,ke=Je,ye=fe;return s(),b("div",null,[N.value?(s(),b(x,{key:1},[(s(!0),b(x,null,X(m,(ae,Ae)=>(s(),b("div",{key:Ae,class:"flex justify-between items-center mt-4 text-sm text-gray-400 dark:text-gray-600"},[t("div",$o,[T(W,{name:"clock"}),t("span",Vo,u(ae.confirmedAt),1)]),ae.receipt?(s(),v(le,{key:0,href:c(p).txLink(ae.receipt.transactionHash),external:"",noStyle:"",class:"group flex items-center"},{default:h(()=>[S(u(c(d).explorerName)+" ",1),T(W,{name:"arrow-up-right",size:"sm",class:"ml-px group-hover:text-pink-500 transition-colors"})]),_:2},1032,["href"])):F("",!0)]))),128)),f.lockConfirmed&&!f.veBalLockInfo.hasExistingLock?(s(),v(ke,{key:0,class:"mt-4",type:"tip",title:c(l)("getVeBAL.previewModal.firstVeBALReceived.title"),description:c(l)("getVeBAL.previewModal.firstVeBALReceived.description")},null,8,["title","description"])):g.value?(s(),v(ke,{key:1,class:"mt-4",type:"warning",title:c(l)("veBAL.liquidityMining.resubmit.hint.title"),description:c(l)("veBAL.liquidityMining.resubmit.hint.description")},null,8,["title","description"])):F("",!0),T(ye,{tag:"router-link",to:{name:"vebal",params:{networkSlug:c(P)}},color:"gray",outline:"",block:"",class:"mt-4"},{default:h(()=>[S(u(f.$t("getVeBAL.previewModal.returnToVeBalPage")),1)]),_:1},8,["to"])],64)):(s(),v(y,{key:0,actions:R.value,isLoading:n.value,disabled:c(_),primaryActionType:"extendLock"},null,8,["actions","isLoading","disabled"]))])}}}),xo={class:"container"},Io={class:"flex justify-between items-center p-3"},Co={class:"font-semibold"},So={class:"text-gray-400 dark:text-gray-600"},Mo={class:"grid grid-cols-2 gap-1"},No=E({__name:"LockAmount",props:{lockablePool:{},totalLpTokens:{}},setup(a){const o=a,{getToken:e}=ee(),{fNum:n}=j(),m=k(()=>o.lockablePool.tokens.map(d=>{const i=l(d.weight),p=d.symbol??e(d.address).symbol;return`${i} ${p}`}).join(" / "));function l(d){return n(d||"0",{style:"percent",maximumFractionDigits:0})}return(d,i)=>{const p=Be;return s(),b("div",xo,[t("div",Io,[t("div",null,[t("div",Co,u(d.$t("getVeBAL.previewModal.lpTokens",[c(n)(d.totalLpTokens,c(D).token)])),1),t("div",So,u(m.value),1)]),t("div",Mo,[(s(!0),b(x,null,X(d.lockablePool.tokensList,_=>(s(),v(p,{key:_,address:_,size:30},null,8,["address"]))),128))])])])}}});const Fo=z(No,[["__scopeId","data-v-d618c8ba"]]),Oo={class:"text-sm divide-y dark:divide-gray-900"},Ro={class:"p-3 bg-gray-50 dark:bg-gray-700 rounded-t"},Ko={class:"p-3"},jo={class:"mb-3 text-secondary"},qo={class:"flex items-center mb-1 whitespace-nowrap"},Wo={class:"w-full table-fixed"},Qo={class:"table-header-cell"},Xo={class:"table-header-cell"},zo={class:"table-body-cell"},Ho={class:"table-body-cell"},Uo=E({__name:"VeBalTooltipExplainer",props:{totalLpTokens:{},lockEndDate:{},expectedVeBalAmount:{}},setup(a){const{fNum:o}=j(),{veBalTokenInfo:e}=oe(),{t:n}=Q(),m=k(()=>{var l,d,i;return[{label:n("getVeBAL.lockForm.lockPeriods.1y"),value:`~1 ${(l=e.value)==null?void 0:l.symbol}`},{label:n("getVeBAL.lockForm.lockPeriods.6m"),value:`~0.5 ${(d=e.value)==null?void 0:d.symbol}`},{label:n("getVeBAL.lockForm.lockPeriods.3m"),value:`~0.25 ${(i=e.value)==null?void 0:i.symbol}`}]});return(l,d)=>{const i=J,p=so;return s(),v(p,{width:"72",noPad:"",class:"ml-2"},{activator:h(()=>[T(i,{name:"info",size:"sm",class:"text-secondary"})]),default:h(()=>{var _;return[t("div",Oo,[t("div",Ro,[t("h5",null,u(c(o)(l.expectedVeBalAmount,c(D).token))+" "+u((_=c(e))==null?void 0:_.symbol),1)]),t("div",Ko,[t("div",jo,u(l.$t("getVeBAL.previewModal.summary.totalVotingEscrowTooltip.explainer")),1),t("div",qo,[t("table",Wo,[t("thead",null,[t("tr",null,[t("th",Qo,u(l.$t("getVeBAL.previewModal.summary.totalVotingEscrowTooltip.table.lockPeriod")),1),t("th",Xo,u(l.$t("getVeBAL.previewModal.summary.totalVotingEscrowTooltip.table.totalVeBAL")),1)])]),t("tbody",null,[(s(!0),b(x,null,X(m.value,(r,L)=>(s(),b("tr",{key:L},[t("td",zo,u(r.label),1),t("td",Ho,u(r.value),1)]))),128))])])])])])]}),_:1})}}});const Yo=z(Uo,[["__scopeId","data-v-363ce41c"]]),Go={class:"summary-table"},Zo={class:"p-2"},Jo={class:"p-2"},et={class:"summary-item-row"},ot={key:0,class:"summary-item-row"},tt={class:"summary-item-row"},lt={class:"summary-item-row"},at={class:"flex items-center"},nt=E({__name:"LockSummary",props:{lockablePool:{},totalLpTokens:{},lockEndDate:{},lockAmount:{},expectedVeBalAmount:{},lockType:{},veBalLockInfo:{}},setup(a){const o=a,{fNum:e}=j(),{veBalTokenInfo:n}=oe(),m=k(()=>K(o.lockablePool.totalLiquidity).div(o.lockablePool.totalShares)),l=k(()=>m.value.times(o.veBalLockInfo.lockedAmount).toString()),d=k(()=>m.value.times(o.lockAmount).toString()),i=k(()=>m.value.times(o.totalLpTokens).toString()),p=k(()=>o.lockType.length===1&&o.lockType.includes(B.EXTEND_LOCK)),_=k(()=>o.lockType.length===1&&o.lockType.includes(B.INCREASE_LOCK));return(r,L)=>{var A;return s(),b("div",Go,[t("h6",Zo,u(r.$t("getVeBAL.previewModal.summary.title")),1),t("div",Jo,[t("div",et,[t("div",null,u(p.value||_.value?r.$t("getVeBAL.previewModal.summary.totalAlreadyLocked"):r.$t("getVeBAL.previewModal.summary.totalToLock")),1),t("div",null,u(c(e)(_.value?l.value:i.value,c(D).fiat)),1)]),_.value?(s(),b("div",ot,[t("div",null,u(r.$t("getVeBAL.previewModal.summary.increasedLockAmount")),1),t("div",null,u(c(e)(d.value,c(D).fiat)),1)])):F("",!0),t("div",tt,[t("div",null,u(p.value?r.$t("getVeBAL.previewModal.summary.newLockEndDate"):r.$t("getVeBAL.previewModal.summary.lockEndDate")),1),t("div",null,u(c(G)(new Date(r.lockEndDate),c(ce))),1)]),t("div",lt,[t("div",null,u(r.$t("getVeBAL.previewModal.summary.totalVotingEscrow")),1),t("div",at,[S(u(c(e)(r.expectedVeBalAmount,c(D).token))+" "+u((A=c(n))==null?void 0:A.symbol)+" ",1),T(Yo,{expectedVeBalAmount:r.expectedVeBalAmount,lockEndDate:r.lockEndDate,totalLpTokens:r.totalLpTokens},null,8,["expectedVeBalAmount","lockEndDate","totalLpTokens"])])])])])}}});const st=z(nt,[["__scopeId","data-v-82615bd1"]]),ct={class:"flex items-center"},it=E({__name:"LockPreviewModal",props:{lockablePool:{},lockablePoolTokenInfo:{},lockAmount:{},lockEndDate:{},lockType:{},veBalLockInfo:{},totalLpTokens:{}},emits:["close"],setup(a,{emit:o}){const e=a,n=V(!1),m=V(e.lockablePool),l=V(e.lockablePoolTokenInfo),d=V(e.lockAmount),i=V(e.lockEndDate),p=V(e.lockType),_=V(e.veBalLockInfo),r=V(e.totalLpTokens),L=Le(r.value,i.value),{t:A}=Q(),{refetch:w}=_e(),{resetState:I}=q(),O=k(()=>p.value.length===1?n.value?A(`getVeBAL.previewModal.titles.${p.value[0]}.confirmed`):A(`getVeBAL.previewModal.titles.${p.value[0]}.default`):n.value?A(`getVeBAL.previewModal.titles.${B.CREATE_LOCK}.confirmed`):A(`getVeBAL.previewModal.titles.${B.CREATE_LOCK}.default`));function P(){o("close")}function M(){n.value=!0,w(),I()}return(H,U)=>{const R=J,N=Ze,g=Ge;return s(),v(g,{show:"",fireworks:n.value,onClose:P},{header:h(()=>[t("div",ct,[n.value?(s(),v(N,{key:0,size:"8",color:"green",class:"mr-2 text-white"},{default:h(()=>[T(R,{name:"check"})]),_:1})):F("",!0),t("h4",null,u(O.value),1)])]),default:h(()=>[T(Fo,{lockablePool:m.value,totalLpTokens:r.value},null,8,["lockablePool","totalLpTokens"]),T(st,{lockablePool:m.value,totalLpTokens:r.value,lockAmount:d.value,lockEndDate:i.value,expectedVeBalAmount:c(L),lockType:p.value,veBalLockInfo:_.value},null,8,["lockablePool","totalLpTokens","lockAmount","lockEndDate","expectedVeBalAmount","lockType","veBalLockInfo"]),T(Do,{veBalLockInfo:_.value,lockConfirmed:n.value,lockAmount:d.value,lockEndDate:i.value,lockType:p.value,lockablePoolTokenInfo:l.value,class:"mt-4",onSuccess:M},null,8,["veBalLockInfo","lockConfirmed","lockAmount","lockEndDate","lockType","lockablePoolTokenInfo"])]),_:1},8,["fireworks"])}}}),rt={class:"mb-6"},ut={class:"pb-2 font-semibold"},mt=E({__name:"LockAmount",props:{lockablePool:{},lockablePoolTokenInfo:{}},setup(a){const o=a,{lockAmount:e}=q(),n=k(()=>K(o.lockablePool.totalLiquidity).div(o.lockablePool.totalShares).times(e.value).toString());return(m,l)=>(s(),b("div",rt,[t("div",null,[t("p",ut,u(m.$t("getVeBAL.lockForm.lockAmount.title")),1)]),T(co,{amount:c(e),"onUpdate:amount":l[0]||(l[0]=d=>Te(e)?e.value=d:null),address:m.lockablePoolTokenInfo.address,tokenValue:n.value,fixedToken:"",name:"lockAmount"},null,8,["amount","address","tokenValue"])]))}}),dt={class:"mb-6"},kt={class:"pb-2 font-semibold"},pt={class:"flex px-1 mt-2 text-sm text-secondary"},_t=["onClick"],vt=E({__name:"LockEndDate",props:{minLockEndDateTimestamp:{},maxLockEndDateTimestamp:{},veBalLockInfo:{default:null}},setup(a){const o=a,{t:e}=Q(),{lockEndDate:n}=q(),m=k(()=>[{label:e("getVeBAL.lockForm.lockPeriods.2w"),action:()=>l(o.minLockEndDateTimestamp)},{label:e("getVeBAL.lockForm.lockPeriods.1m"),action:()=>l(se(o.minLockEndDateTimestamp,4).getTime())},{label:e("getVeBAL.lockForm.lockPeriods.3m"),action:()=>l(se(o.minLockEndDateTimestamp,12).getTime())},{label:e("getVeBAL.lockForm.lockPeriods.6m"),action:()=>l(se(o.minLockEndDateTimestamp,24).getTime())},{label:e("getVeBAL.lockForm.lockPeriods.1y"),action:()=>{n.value=d(o.maxLockEndDateTimestamp)}}]);ge(()=>{var i;n.value=(i=o.veBalLockInfo)!=null&&i.hasExistingLock?d(o.veBalLockInfo.lockedEndDate):d(o.maxLockEndDateTimestamp)});function l(i){n.value=d(Math.min(i,o.maxLockEndDateTimestamp))}function d(i){return G(i,ze)}return(i,p)=>{const _=io;return s(),b("div",dt,[t("div",null,[t("p",kt,u(i.$t("getVeBAL.lockForm.lockEndDate.title")),1)]),T(_,{modelValue:c(n),"onUpdate:modelValue":p[0]||(p[0]=r=>Te(n)?n.value=r:null),name:"lockEndDate",type:"date",min:d(i.minLockEndDateTimestamp),max:d(i.maxLockEndDateTimestamp),step:"7"},null,8,["modelValue","min","max"]),t("div",pt,[(s(!0),b(x,null,X(m.value,(r,L)=>(s(),b("div",{key:L,class:"mr-3 hover:text-pink-500 focus:text-pink-500 cursor-pointer",onClick:r.action}," ~"+u(r.label),9,_t))),128))])])}}}),ft={class:"container"},Lt={class:"row"},bt=E({__name:"Summary",props:{expectedVeBalAmount:{}},setup(a){const{fNum:o}=j(),{veBalTokenInfo:e}=oe();return(n,m)=>{var l;return s(),b("div",ft,[t("div",Lt,[t("div",null,u(n.$t("getVeBAL.lockForm.summary.receive.title")),1),t("div",null,u(n.expectedVeBalAmount!=null?c(o)(n.expectedVeBalAmount,c(D).token):"-")+" "+u((l=c(e))==null?void 0:l.symbol),1)])])}}});const gt=z(bt,[["__scopeId","data-v-023b74e8"]]),Tt={class:"w-full"},ht={class:"pb-1.5 text-xs leading-none text-secondary"},yt={class:"flex justify-between items-center"},At={class:"mt-6"},Bt=E({__name:"VeBalForm",props:{lockablePool:{},lockablePoolTokenInfo:{},veBalLockInfo:{}},setup(a){const o=a,e=V(!1),{lockEndDate:n,lockAmount:m}=q(),{isWalletReady:l,startConnectWithInjectedProvider:d,isMismatchedNetwork:i}=ue(),{isValidLockAmount:p,isIncreasedLockAmount:_,totalLpTokens:r}=Eo(je(o,"veBalLockInfo")),{minLockEndDateTimestamp:L,maxLockEndDateTimestamp:A,isValidLockEndDate:w,isExtendedLockEndDate:I}=Po(o.veBalLockInfo),{balanceFor:O}=ee(),P=k(()=>O(o.lockablePool.address)),M=k(()=>{var g,C;return i.value?!0:(g=o.veBalLockInfo)!=null&&g.hasExistingLock&&!((C=o.veBalLockInfo)!=null&&C.isExpired)?!_.value&&!I.value:!K(P.value).gt(0)||!p.value||!w.value}),H=k(()=>M.value?"0":Le(r.value,n.value)),U=k(()=>{var g,C;if((g=o.veBalLockInfo)!=null&&g.hasExistingLock&&!((C=o.veBalLockInfo)!=null&&C.isExpired)){if(_.value&&I.value)return[B.INCREASE_LOCK,B.EXTEND_LOCK];if(I.value)return[B.EXTEND_LOCK];if(_.value)return[B.INCREASE_LOCK]}return[B.CREATE_LOCK]});function R(){e.value=!1}function N(){M.value||(e.value=!0)}return(g,C)=>{const Y=fe,te=ve;return s(),b(x,null,[T(te,{shadow:"xl",exposeOverflow:"",noBorder:""},{header:h(()=>[t("div",Tt,[t("div",ht,u(c(Oe).network.chainName),1),t("div",yt,[t("h4",null,u(g.$t("getVeBAL.lockForm.title")),1)])])]),default:h(()=>[T(mt,{lockablePool:g.lockablePool,lockablePoolTokenInfo:g.lockablePoolTokenInfo},null,8,["lockablePool","lockablePoolTokenInfo"]),T(vt,{minLockEndDateTimestamp:c(L),maxLockEndDateTimestamp:c(A),veBalLockInfo:g.veBalLockInfo},null,8,["minLockEndDateTimestamp","maxLockEndDateTimestamp","veBalLockInfo"]),T(gt,{expectedVeBalAmount:H.value},null,8,["expectedVeBalAmount"]),t("div",At,[c(l)?(s(),v(Y,{key:1,color:"gradient",block:"",disabled:M.value,onClick:N},{default:h(()=>[S(u(g.$t("preview")),1)]),_:1},8,["disabled"])):(s(),v(Y,{key:0,label:g.$t("connectWallet"),color:"gradient",block:"",onClick:c(d)},null,8,["label","onClick"]))])]),_:1}),(s(),v(qe,{to:"#modal"},[e.value&&g.veBalLockInfo?(s(),v(it,{key:0,lockablePool:g.lockablePool,lockablePoolTokenInfo:g.lockablePoolTokenInfo,lockAmount:c(m),lockEndDate:c(n),lockType:U.value,veBalLockInfo:g.veBalLockInfo,totalLpTokens:c(r),onClose:R},null,8,["lockablePool","lockablePoolTokenInfo","lockAmount","lockEndDate","lockType","veBalLockInfo","totalLpTokens"])):F("",!0)]))],64)}}}),Et=E({__name:"LockForm",setup(a){const{getToken:o}=ee(),{isWalletReady:e}=ue(),{lockablePoolId:n}=oe(),{isDesktop:m,isMobile:l}=$e(),d=Pe(n.value),i=_e(),p=k(()=>d.isLoading.value),_=k(()=>i.isLoading.value),r=k(()=>d.data.value),L=k(()=>r.value!=null?o(r.value.address):null),A=k(()=>i.data.value),w=k(()=>e.value?p.value||_.value:p.value);return(I,O)=>{const P=Ee;return s(),v(we,{offsetGutters:""},{gutterLeft:h(()=>[w.value||!r.value||!L.value?(s(),v(P,{key:0,class:"h-36"})):(s(),v(Ao,{key:1,lockablePool:r.value,lockablePoolTokenInfo:L.value},null,8,["lockablePool","lockablePoolTokenInfo"])),c(m)?(s(),b(x,{key:2},[w.value||!r.value||!L.value?(s(),v(P,{key:0,class:"mt-4 h-12"})):(s(),v(pe,{key:1,lockablePool:r.value,lockablePoolTokenInfo:L.value},null,8,["lockablePool","lockablePoolTokenInfo"]))],64)):F("",!0)]),gutterRight:h(()=>[w.value?(s(),v(P,{key:0,class:"h-64"})):(s(),v(We,{key:1,veBalLockInfo:A.value},null,8,["veBalLockInfo"])),c(l)?(s(),b(x,{key:2},[w.value||!r.value||!L.value?(s(),v(P,{key:0,class:"mt-4 h-12"})):(s(),v(pe,{key:1,lockablePool:r.value,lockablePoolTokenInfo:L.value},null,8,["lockablePool","lockablePoolTokenInfo"]))],64)):F("",!0)]),default:h(()=>[w.value||!r.value||!L.value?(s(),v(P,{key:0,class:"h-96"})):(s(),v(Bt,{key:1,lockablePool:r.value,lockablePoolTokenInfo:L.value,veBalLockInfo:A.value},null,8,["lockablePool","lockablePoolTokenInfo","veBalLockInfo"]))]),_:1})}}}),wt={key:1,class:"text-center"},Pt={class:"text-lg font-semibold"},$l=E({__name:"get-vebal",setup(a){return(o,e)=>c(Ne)?(s(),v(Et,{key:0})):(s(),b("div",wt,[t("div",Pt,u(o.$t("veBAL.notSupported.title")),1),t("div",null,u(o.$t("veBAL.notSupported.description")),1)]))}});export{$l as default};
//# sourceMappingURL=get-vebal-4de49c71.js.map
