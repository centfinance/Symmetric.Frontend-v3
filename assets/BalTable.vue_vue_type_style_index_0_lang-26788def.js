import{_ as se}from"./BalAsset-fcab7531.js";import{at as F,ao as O}from"./BalBtn-cca6788c.js";import{T as M}from"./connector-16147cef.js";import{d as j,b as l,p as i,F as p,k as h,x as f,c as v,l as L,h as R,at as z,m as Y,z as o,v as T,H as ae,q as d,i as m,j as Z,r as b,ao as le,u as D,o as re,C as oe,y as V,ar as W,au as K,A as U}from"./runtime-core.esm-bundler-558f8953.js";import{_ as ne}from"./BalStack.vue_vue_type_script_lang-342e535e.js";const ie=["onClick"],X=j({__name:"BalTableRow",props:{columns:{},onRowClick:{type:Function},data:{},link:{},href:{},sticky:{},isColumnStuck:{type:Boolean},pinned:{type:Boolean}},setup(S){const k=S;function a(s,n=!1){var r;(r=k.link)!=null&&r.to||k.onRowClick&&k.onRowClick(s,n)}function c(s){return s!==0?"":k.sticky==="horizontal"||k.sticky==="both"?"horizontalSticky":""}function w(s,n){var r;s.isCheckbox&&((r=n.target)==null?void 0:r.type)!=="checkbox"&&(n.preventDefault(),n.stopPropagation())}return(s,n)=>(l(),i("tr",{class:f(["bg-white z-10 row-bg group",{"cursor-pointer":a,"border-b dark:border-gray-700":s.pinned}]),onClick:[n[0]||(n[0]=F(r=>a(s.data),["exact"])),n[1]||(n[1]=F(r=>a(s.data,!0),["meta"])),n[2]||(n[2]=F(r=>a(s.data,!0),["ctrl"]))]},[(l(!0),i(p,null,h(s.columns,(r,$)=>{var g,H;return l(),i("td",{key:r.id+$,class:f([r.align==="right"?"text-left":"text-right",c($),s.isColumnStuck?"isSticky":"",r.isCheckbox?"cursor-default":""]),onClick:N=>w(r,N)},[(l(),v(ae((g=s.href)!=null&&g.getHref(s.data)?"a":s.link?"router-link":"div"),{to:s.link?{name:s.link.to,params:s.link.getParams(s.data)}:null,href:(H=s.href)==null?void 0:H.getHref(s.data)},{default:L(()=>[r.Cell?R(s.$slots,r.Cell,z(Y({key:0},s.data))):(l(),i("div",{key:1,class:f(o(M.compact)(["mr-6 py-4",r.align==="right"?"text-right":"text-left",r.cellClassName]))},T(typeof r.accessor=="string"?s.data[r.accessor]:r.accessor(s.data)),3))]),_:2},1032,["to","href"]))],10,ie)}),128))],2))}}),ue=d("span",{class:"font-semibold text-left"}," Total ",-1),de=[ue],ce=j({__name:"TotalsRow",props:{isColumnStuck:{type:Boolean},onRowClick:{type:Function},sticky:{},columns:{}},setup(S){const k=S;function a(c){return c!==0?"":k.sticky==="horizontal"||k.sticky==="both"?"horizontalSticky":""}return(c,w)=>(l(),i("tbody",null,[d("tr",{class:f(["bg-white z-10 row-bg group",{"cursor-pointer":!!k.onRowClick}])},[d("td",{class:f([a(0),c.isColumnStuck?"isSticky":"","text-left p-6 bg-white dark:bg-gray-850 border-t dark:border-gray-900 align-top"])},de,2),(l(!0),i(p,null,h(o(M.tail)(c.columns),(s,n)=>(l(),i("td",{key:s.id,class:f([s.align==="right"?"text-left":"text-right",a(n+1),c.isColumnStuck?"isSticky":"","p-6 bg-white dark:bg-gray-850 border-t dark:border-gray-900"])},[s.totalsCell?R(c.$slots,s.totalsCell,{key:0}):m("",!0)],2))),128))],2)]))}}),fe="/assets/pin-efd817f5.svg",ke={class:"px-6 pt-4 pb-2"},ye=["src"],pe=d("span",{class:"text-secondary text-medium"},"Pinned",-1),ge=j({__name:"PinHeader",setup(S){return(k,a)=>{const c=ne;return l(),i("tr",null,[d("td",ke,[Z(c,{horizontal:"",spacing:"sm"},{default:L(()=>[d("img",{src:o(fe)},null,8,ye),pe]),_:1})])])}}}),he={class:"w-full whitespace-normal table-fixed"},we={class:"z-10 bg-white dark:bg-gray-900"},ve=["onClick"],Ce={key:1},be={class:"text-base"},me={key:1,class:"flex justify-start items-center p-6 max-w-full h-24 bg-white dark:bg-gray-850 row-bg text-secondary"},Re={key:2,class:"w-full whitespace-normal table-fixed"},_e=j({__name:"BalTable",props:{columns:{},data:{},rowKey:{},isLoading:{type:Boolean,default:!1},isLoadingMore:{type:Boolean,default:!1},skeletonClass:{default:""},onRowClick:{},sticky:{},square:{type:Boolean,default:!1},isPaginated:{type:Boolean,default:!1},noResultsLabel:{default:""},link:{default:null},href:{default:null},initialState:{default:()=>({sortColumn:null,sortDirection:null})},pin:{},getTableRowClass:{type:Function,default:()=>""},isOnlyDescSort:{type:Boolean,default:!1},renderedRowsIdx:{}},emits:["loadMore","onColumnSort"],setup(S,{emit:k}){var J,Q;const a=S,c=b(),w=b(!1),s=b(a.data),n=b(((J=a.initialState)==null?void 0:J.sortDirection)||null),r=b(((Q=a.initialState)==null?void 0:Q.sortColumn)||null),$=b(),g=b(),H=le(a,"getTableRowClass"),N=D(()=>M.sumBy(a.columns,"width")),E=e=>e!==0?"":a.sticky==="horizontal"||a.sticky==="both"?"horizontalSticky":"",q=(e,y=!0)=>{const B=a.columns.find(u=>u.id===e);if(!(B!=null&&B.sortKey))return;e!==r.value&&(n.value=null),r.value=e,y&&x(),e&&n.value&&k("onColumnSort",e);const t=M.sortBy(a.data.value||a.data,B.sortKey);if(n.value==="asc"){s.value=t;return}if(n.value==="desc"){s.value=t.reverse();return}s.value=a.data};function x(){if(a.isOnlyDescSort){n.value="desc";return}if(n.value===null){n.value="desc";return}if(n.value==="desc"){n.value="asc";return}n.value=null}function I(e){switch(e){case"left":return"justify-start";case"right":return"justify-end";case"center":return"justify-center";default:return"justify-start"}}function A(e,y){return a.rowKey?`tableRow-${a.rowKey(e)}`:`tableRow-${e.id??y}`}re(()=>{g.value&&(g.value.onscroll=()=>{if(g.value&&c.value){const e=g.value.offsetWidth/c.value.offsetWidth/10;w.value=c.value.offsetLeft>c.value.offsetWidth*e}},g.value.addEventListener("scroll",()=>{g.value&&$.value&&($.value.scrollLeft=g.value.scrollLeft)})),q(r.value,!1)});const ee=D(()=>a.pin?(s.value||[]).filter(e=>{var y;return!((y=a.pin)!=null&&y.pinnedData.includes(e[a.pin.pinOn]))}):s.value),G=D(()=>a.pin?(s.value||[]).filter(e=>{var y;return(y=a.pin)==null?void 0:y.pinnedData.includes(e[a.pin.pinOn])}):[]),C=D(()=>a.columns.filter(e=>!e.hidden)),te=D(()=>a.columns.some(e=>e.totalsCell!==void 0));return oe([()=>a.data,()=>a.isLoading],([e])=>{if(r.value&&n.value!==null){q(r.value,!1);return}s.value=e}),(e,y)=>{const B=se;return l(),i(p,null,[d("div",{class:f(["max-w-full whitespace-nowrap","max-lg:overflow-hidden",{"rounded-lg":!e.square}])},[d("div",{ref_key:"headerRef",ref:$,class:"max-lg:overflow-hidden"},[d("table",he,[d("colgroup",null,[(l(!0),i(p,null,h(o(C),t=>(l(),i("col",{key:t.id,style:V({width:`${t==null?void 0:t.width}px`})},null,4))),128))]),d("thead",we,[(l(!0),i(p,null,h(o(C),(t,u)=>(l(),i("th",{key:`header-${t.id}`,ref_for:!0,ref:u==0?"stickyHeaderRef":void 0,class:f(["p-6 bg-white dark:bg-gray-850 headingShadow border-b dark:border-gray-900",t.className,E(u),o(w)?"isSticky":"",t.sortKey&&!(a.isOnlyDescSort&&o(r)===t.id)?"cursor-pointer":"",t.sortKey&&o(r)!==t.id?"text-gray-800 hover:text-purple-600 focus:text-blue-500 dark:text-gray-100 dark:hover:text-yellow-500 dark:focus:text-yellow-500 transition-colors":"",o(r)===t.id&&o(n)?"text-blue-600 hover:text-blue-500 focus:text-purple-600 dark:text-blue-400 dark:hover:text-blue-600 dark:focus:text-blue-600 transition-colors":"",e.square?"":"rounded-t-lg"]),onClick:P=>q(t.id)},[d("div",{class:f(["flex",I(t.align)])},[t.Header?R(e.$slots,t.Header,z(Y({key:0},t))):(l(),i("div",Ce,[d("h5",be,T(t.name),1)])),o(r)===t.id&&o(n)==="asc"?(l(),v(O,{key:2,name:"arrow-up",size:"sm",class:"flex items-center ml-1"})):m("",!0),o(r)===t.id&&o(n)==="desc"?(l(),v(O,{key:3,name:"arrow-down",size:"sm",class:"flex items-center ml-1"})):m("",!0)],2)],10,ve))),128))])])],512),d("div",{ref_key:"bodyRef",ref:g,class:"max-lg:overflow-auto"},[e.isLoading?(l(),v(B,{key:0,class:f([e.skeletonClass,"min-w-full"]),square:"",style:V({width:`${o(N)}px`})},null,8,["class","style"])):!e.isLoading&&!o(s).length?(l(),i("div",me,T(e.noResultsLabel||e.$t("noResults")),1)):(l(),i("table",Re,[d("colgroup",null,[(l(!0),i(p,null,h(o(C),t=>(l(),i("col",{key:t.id,style:V({width:`${t==null?void 0:t.width}px`})},null,4))),128))]),d("tr",null,[(l(!0),i(p,null,h(o(C),(t,u)=>(l(),i("td",{key:t.id,class:f([t.align==="right"?"text-left":"text-right",E(u),o(w)?"isSticky":"","bg-white dark:bg-gray-850 p-0 m-0 h-0"])},null,2))),128))]),o(G).length?(l(),v(ge,{key:0})):m("",!0),(l(!0),i(p,null,h(o(G),(t,u)=>(l(),v(X,{key:A(t,u),class:f(o(H)(t,u)),data:t,columns:o(C),onRowClick:e.onRowClick,link:e.link,href:e.href,sticky:e.sticky,isColumnStuck:o(w),pinned:""},W({_:2},[h(e.$slots,(P,_)=>({name:_,fn:L(()=>[R(e.$slots,_,z(K(t)))])}))]),1032,["class","data","columns","onRowClick","link","href","sticky","isColumnStuck"]))),128)),(l(!0),i(p,null,h(o(ee),(t,u)=>(l(),i(p,{key:A(t,u)},[!e.renderedRowsIdx||u<=e.renderedRowsIdx?(l(),v(X,{key:0,class:f(a.getTableRowClass?a.getTableRowClass(t,u):void 0),data:t,columns:o(C),onRowClick:e.onRowClick,link:e.link,href:e.href,sticky:e.sticky,isColumnStuck:o(w)},W({default:L(()=>[R(e.$slots,"named",z(K(t)))]),_:2},[h(e.$slots,(P,_)=>({name:_,fn:L(()=>[R(e.$slots,_,z(K(t)))])}))]),1032,["class","data","columns","onRowClick","link","href","sticky","isColumnStuck"])):m("",!0)],64))),128)),!e.isLoading&&o(s).length&&o(te)?(l(),v(ce,{key:1,columns:o(C),onRowClick:e.onRowClick,sticky:e.sticky,isColumnStuck:o(w)},W({_:2},[h(e.$slots,(t,u)=>({name:u,fn:L(P=>[R(e.$slots,u,z(K(P)))])}))]),1032,["columns","onRowClick","sticky","isColumnStuck"])):m("",!0)]))],512)],2),e.isPaginated&&!e.isLoading?(l(),i("div",{key:0,class:"bal-table-pagination-btn text-secondary",onClick:y[0]||(y[0]=t=>!e.isLoadingMore&&e.$emit("loadMore"))},[e.isLoadingMore?(l(),i(p,{key:0},[U(T(e.$t("loading")),1)],64)):(l(),i(p,{key:1},[U(T(e.$t("loadMore"))+" ",1),Z(O,{name:"chevron-down",size:"sm",class:"ml-2"})],64))])):m("",!0)],64)}}});export{_e as _};
//# sourceMappingURL=BalTable.vue_vue_type_style_index_0_lang-26788def.js.map
