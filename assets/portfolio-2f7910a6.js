import{_ as W}from"./BalStack.vue_vue_type_script_lang-342e535e.js";import{aw as I,aq as V,au as Z,ch as ve,aS as ye,aU as K}from"./BalBtn-cca6788c.js";import{P as N,a as F,A as Pe,_ as we}from"./UserInvestedInAffectedPoolAlert.vue_vue_type_script_setup_true_lang-6482f209.js";import{u as ee,S as be,N as Be,Q as oe,a5 as Y}from"./connector-16147cef.js";import{a as te,c as z,u as se,p as Se,b as xe}from"./user-pools.provider-b709d200.js";import{_ as q}from"./StakePreviewModal.vue_vue_type_script_setup_true_lang-33f4be12.js";import{_ as ne}from"./balancer-sdk-d0995fe4.js";import{d as x,b as n,c as g,l as _,q as k,v as P,z as e,j as p,u as w,p as B,A as G,i as S,r as v,C as Ce,o as Ae,x as $e,F as Q}from"./runtime-core.esm-bundler-558f8953.js";import{p as ae}from"./pool-staking.provider-e441fa29.js";import{_ as Le}from"./BalAlert-fdfde589.js";import{u as le,N as X}from"./cross-chain-sync.provider-360a4a87.js";import{_ as Me}from"./CheckpointGaugeModal.vue_vue_type_script_setup_true_lang-57fbd20a.js";import{_ as Ne}from"./BalActionSteps.vue_vue_type_script_setup_true_lang-f37eca6e.js";import{a as Ve,b as Te}from"./useTransactions-114fc9d7.js";import{i as ie}from"./useVeBAL-5fa15e49.js";import{_ as Re}from"./BalAsset-fcab7531.js";import{u as Ue}from"./useDarkMode-6a81be08.js";import"./_commonjsHelpers-87174ba5.js";import"./metamask.connector-0225016b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./BalTable.vue_vue_type_style_index_0_lang-26788def.js";import"./BalTooltip.vue_vue_type_style_index_0_lang-8bf6235c.js";import"./BalAssetSet-0f096fdb.js";import"./vue-router-461057a5.js";import"./constants-5d025550.js";import"./APRTooltip.vue_vue_type_script_setup_true_lang-c7384c0d.js";import"./useDisabledJoinPool-118f9751.js";import"./useTailwind-38f80624.js";import"./tailwind.config-235e68cf.js";import"./browser-6c45db04.js";import"./usePoolHelpers-eb955974.js";import"./pools-18fd7fb0.js";import"./token-lists.provider-00d13873.js";import"./useBreakpoints-ee2a85bc.js";import"./TokenPills.vue_vue_type_script_setup_true_lang-7a301204.js";import"./tokens_black-ddc115cd.js";import"./BalChip-951d5b52.js";import"./BalChipNew.vue_vue_type_script_setup_true_lang-8ef0bb16.js";import"./PoolWarningTooltip.vue_vue_type_script_setup_true_lang-ee6c5f9c.js";import"./PoolFeatureChip.vue_vue_type_script_setup_true_lang-de605f2d.js";import"./useProtocols-aae81d2e.js";import"./index.esm-d99d5267.js";import"./usePoolsQuery-5de67548.js";import"./api-e32fdf3d.js";import"./subgraph-fallback.service-7e7c32be.js";import"./index-155f0d25.js";import"./index-18b6daea.js";import"./StablePhantomPool-f25cd4a4.js";import"./balancer-api.service-037872f8.js";import"./useQueryHelpers-8fe10019.js";import"./user-data.provider-8fbcf693.js";import"./useVeBalLockInfoQuery-e92ea085.js";import"./liquidity-gauge-c56bdf84.js";import"./usePoolQuery-7e1952e9.js";import"./BalCircle-324fa9cd.js";import"./ConfirmationIndicator.vue_vue_type_script_setup_true_lang-35a245bf.js";import"./BalLink-65772d8f.js";import"./BalDataListRow.vue_vue_type_script_setup_true_lang-e378cd32.js";import"./useTokenApprovalActions-42c413d9.js";import"./useGraphQuery-d0a03aea.js";import"./wallet-logos-346092ca.js";import"./anime.es-de4e5aa0.js";import"./index-fe1d1633.js";import"./events-5f626723.js";import"./readable-browser-a0df197a.js";import"./immutable-2b056f5a.js";import"./index-1de0572e.js";import"./Avatar.vue_vue_type_script_setup_true_lang-5ab9890e.js";const Ee={class:"flex flex-col text-left"},Ge=k("p",{class:"mb-5 whitespace-pre-line"}," The sync veBAL operation needs to be performed on Ethereum Mainnet, since that is where your veBAL balance lives. ",-1),We={class:"mb-5 whitespace-pre-line"},re=x({__name:"ProceedToSyncModal",props:{isVisible:{type:Boolean}},emits:["close"],setup(b){const{networkId:o,getNetworkSlug:l}=ee();return(t,a)=>{const d=I;return n(),g(ne,{ref:"redirectModal",show:t.isVisible,onClose:a[1]||(a[1]=c=>t.$emit("close"))},{header:_(()=>[k("h3",null,P(t.$t("modals.veBalRedirectModal.title")),1)]),default:_(()=>[k("div",Ee,[Ge,k("p",We," Ethereum Mainnet to "+P(e(be)[e(o)].chainName)+" will enable you to get boosted APR’s for any pools where you stake in the new boost-aware gauges. ",1),p(d,{label:"Go to Ethereum Mainnet",color:"gradient",onClick:a[0]||(a[0]=c=>t.$router.push({name:"vebal",params:{networkSlug:e(l)(e(Be).MAINNET)}}))})])]),_:1},8,["show"])}}}),Ie={class:"flex items-center"},je={class:"flex-[2]"},Oe={key:0,class:"flex flex-1 justify-end"},qe={key:1,class:"flex flex-1 justify-end"},Fe=x({__name:"PortfolioSyncTip",props:{shouldPokePoolsMap:{}},emits:["showProceedModal","showPokeAllGaugeModal"],setup(b){const o=b,{networksSyncState:l,tempSyncingNetworks:t,l2VeBalBalances:a,isLoading:d}=le(),{networkId:c}=ee(),{account:i}=V(),r=w(()=>{var y;if(d.value)return null;const u=l.value[c.value];if(u===X.Unsynced&&!!t.value[i.value]&&t.value[i.value].networks.includes(c.value))return Number((y=a.value)==null?void 0:y[c.value])>0?{title:"Resync if you acquire new veBAL",text:"Newly acquired veBAL doesn’t auto-sync to L2s. Remember to resync on Ethereum Mainnet after acquiring more veBAL to continue boosting to your max."}:{title:"Sync your veBAL to maximize your boost",text:"If you have veBAL, sync your veBAL balance from Ethereum Mainnet to max your boost while staking on Arbitrum. Resync after acquiring more veBAL to continue boosting to your max."};if(Object.keys(o.shouldPokePoolsMap||{}).length>0)return{title:"Poke to refresh gauges for boosted APRs",text:"After your veBAL is synced to an L2, the pool gauge remains unaware of your new balance until it is interacted with. ‘Poke all’ to gas-efficiently update all gauges. Otherwise, interact with each gauge individzually (e.g. by Claiming BAL).",showPokeAllBtn:!0,hideBtn:!0};if(u===X.Synced)return{title:"Trigger pool gauge updates to get your boosts",text:"Pool gauges don’t automatically recognize changes in veBAL until triggered. Updates are triggered when you interact with a gauge (e.g. by claiming BAL, stake/unstake or explicitly update the gauge on each individual pool page)",hideBtn:!0}});return(u,s)=>{const m=I,y=Le;return e(r)?(n(),g(y,{key:0,title:e(r).title,type:"tip",class:"mb-5 w-100"},{default:_(()=>[k("div",Ie,[k("div",je,P(e(r).text),1),e(r).showPokeAllBtn?(n(),B("div",Oe,[p(m,{color:"gradient",onClick:s[0]||(s[0]=C=>u.$emit("showPokeAllGaugeModal"))},{default:_(()=>[G(" Poke all gauges ")]),_:1})])):e(r).hideBtn?S("",!0):(n(),B("div",qe,[p(m,{color:"gradient",onClick:s[1]||(s[1]=C=>u.$emit("showProceedModal"))},{default:_(()=>[G(" Sync veBAL ")]),_:1})]))])]),_:1},8,["title"])):S("",!0)}}}),ze={class:"flex flex-col justify-between"},De=k("div",{class:"mb-12"},[k("span",{class:"mb-3"}," Even after syncing veBAL to an L2, pool gauges remains unaware of your new balance until interacted with. This means, you are currently missing out on your maximum possible boost. "),k("span",null," ‘Poke gauge’ to gas-efficiently update the gauge with your new veBAL balance. Otherwise, interact with a gauge to trigger the update. If you already have accumulated some incentives, ‘Claim BAL’ to get your incentives and trigger the update for future boosts. ")],-1),He=x({__name:"CheckpointAllGaugesModal",props:{isVisible:{type:Boolean,default:!1},shouldPokePoolsMap:{}},emits:["close","success"],setup(b,{emit:o}){const l=b,{checkpointAllGauges:t}=te(),{addTransaction:a}=Ve(),{isMismatchedNetwork:d}=V(),{txListener:c}=Te(),i=v(!1);async function r(){try{const s=await t(Object.values(l.shouldPokePoolsMap));return a({id:s.hash,type:"tx",action:"userGaugeCheckpoint",summary:""}),await c(s,{onTxConfirmed:async()=>{o("success")},onTxFailed:()=>{console.error("Tx failed")}}),s}catch(s){return console.error(s),Promise.reject(s)}}const u=[{label:"Poke all gauges",loadingLabel:"Confirm poke in wallet",confirmingLabel:"Confirming poke",action:async()=>r(),stepTooltip:""}];return(s,m)=>{const y=Ne,C=I,T=ne;return n(),g(T,{show:s.isVisible,disabled:e(d),title:"Poke all gauges to get boosted APRs",onClose:m[2]||(m[2]=$=>o("close"))},{default:_(()=>[k("div",ze,[De,p(y,{actions:u,primaryActionType:"userGaugeCheckpoint",onSuccess:m[0]||(m[0]=$=>i.value=!0)}),e(i)?(n(),g(C,{key:0,color:"gray",outline:"",block:"",onClick:m[1]||(m[1]=$=>s.$emit("close"))},{default:_(()=>[G(P(s.$t("close")),1)]),_:1})):S("",!0)])]),_:1},8,["show","disabled"])}}}),Je={class:"px-4 xl:px-0"},Ke=x({__name:"StakedPoolsTable",setup(b){const o=v(!1),l=v(),t=v(!1),a=v(),d=v(!1),c=[N.Unstake,N.Add,N.Vote],i=v(!1),r=v(),u=v(!1);ae();const{stakedPools:s,poolBoostsMap:m,stakedShares:y,isLoading:C,hasNonPrefGaugesPoolsAddresses:T,userGaugeShares:$}=te(),{shouldPokeGauge:j}=le(),{refetchAllUserPools:U}=z(),{isWalletReady:L,isWalletConnecting:D}=V(),{t:E}=Z(),ce=oe.network.shortName,ue=w(()=>L.value||D.value?E("noStakedInvestments",[ce]):E("connectYourWallet")),de=w(()=>{const f=["poolVolume","migrate","lockEndDate","volume"];return Y.value||f.push("myBoost"),f}),pe=w(()=>JSON.stringify(s.value));function me(f){o.value=!0,l.value=f}function fe(f){t.value=!0,a.value=f}function H(){U(),o.value=!1,t.value=!1}function he(f){u.value=!0,r.value=f}async function J(){await U()}const M=v({});function ke(f){Reflect.deleteProperty(M.value,f)}function ge(){M.value={}}function _e(f){u.value=!1,r.value=void 0,ke(f)}return Ce(()=>$.value,async f=>{if(f)for(const h of f)try{const A=h==null?void 0:h.gauge.id;if(!A)throw new Error("No gauge id");await j(A)&&(M.value[h.gauge.poolAddress]=A)}catch(A){console.log(A)}},{immediate:!0,deep:!0}),(f,h)=>{var O;const A=W;return n(),B("div",null,[p(A,{vertical:"",spacing:"sm"},{default:_(()=>[k("h5",Je,P(f.$t("staking.stakedPools")),1),p(Fe,{shouldPokePoolsMap:e(M),onShowProceedModal:h[0]||(h[0]=R=>d.value=!0),onShowPokeAllGaugeModal:h[1]||(h[1]=R=>i.value=!0)},null,8,["shouldPokePoolsMap"]),(n(),g(F,{key:e(pe),data:e(s),shares:e(y),boosts:e(m),poolsType:"staked",noPoolsLabel:e(ue),hiddenColumns:e(de),sortColumn:"myBalance",isLoading:e(L)&&e(C),showPoolShares:"",showActions:"",showStakeActions:"",showBoost:e(Y),defaultPoolActions:c,shouldPokePoolsMap:e(M),hasNonPrefGaugesPoolsAddresses:e(T),onTriggerUnstake:me,onTriggerRestake:fe,onTriggerVote:h[2]||(h[2]=R=>d.value=!0),onTriggerCheckpoint:he},null,8,["data","shares","boosts","noPoolsLabel","hiddenColumns","isLoading","showBoost","shouldPokePoolsMap","hasNonPrefGaugesPoolsAddresses"]))]),_:1}),e(l)?(n(),g(q,{key:0,pool:e(l),isVisible:e(o),action:"unstake",onClose:H,onSuccess:J},null,8,["pool","isVisible"])):S("",!0),e(a)?(n(),g(q,{key:1,pool:e(a),isVisible:e(t),action:"restake",onClose:H,onSuccess:J},null,8,["pool","isVisible"])):S("",!0),p(re,{isVisible:e(d),onClose:h[3]||(h[3]=R=>d.value=!1)},null,8,["isVisible"]),p(He,{shouldPokePoolsMap:e(M),isVisible:e(i),onClose:h[4]||(h[4]=R=>i.value=!1),onSuccess:ge},null,8,["shouldPokePoolsMap","isVisible"]),p(Me,{poolAddress:(O=e(r))==null?void 0:O.address,isVisible:e(u),onClose:h[5]||(h[5]=R=>u.value=!1),onSuccess:_e},null,8,["poolAddress","isVisible"])])}}}),Ye={key:0,class:"px-4 xl:px-0"},Qe=x({__name:"UnstakedPoolsTable",setup(b){const o=v(!1),l=v(),t=oe.network.shortName,a=["poolVolume","migrate","lockEndDate","volume"];ae();const{isWalletReady:d,isWalletConnecting:c}=V(),{t:i}=Z(),{unstakedPools:r,userPoolShares:u,refetchAllUserPools:s,isLoading:m}=z(),y=[N.Stake,N.Add,N.Remove],C=w(()=>d.value||c.value?i("noUnstakedInvestments",[t]):i("connectYourWallet")),T=w(()=>JSON.stringify(r.value));function $(L){o.value=!0,l.value=L}function j(){s(),o.value=!1}async function U(){await s()}return Ae(()=>{s()}),(L,D)=>{const E=W;return n(),B("div",null,[p(E,{vertical:"",spacing:"sm"},{default:_(()=>[e(ie)?(n(),B("h5",Ye,P(L.$t("staking.unstakedPools")),1)):S("",!0),(n(),g(F,{key:e(T),isLoading:e(d)&&e(m),data:e(r),shares:e(u),noPoolsLabel:e(C),sortColumn:"myBalance",hiddenColumns:a,defaultPoolActions:y,showPoolShares:"",showActions:"",onTriggerStake:$},null,8,["isLoading","data","shares","noPoolsLabel"]))]),_:1}),e(l)?(n(),g(q,{key:0,pool:e(l),isVisible:e(o),action:"stake",onClose:j,onSuccess:U},null,8,["pool","isVisible"])):S("",!0)])}}}),Xe={class:"px-4 xl:px-0"},Ze=x({__name:"VeBalPoolTable",props:{lockPool:{},lock:{}},setup(b){const o=b,{totalLockedShares:l}=se(),t=w(()=>{var i,r,u;return o.lockPool?[{...o.lockPool,lockedEndDate:(i=o.lock)!=null&&i.hasExistingLock&&!((r=o.lock)!=null&&r.isExpired)?(u=o.lock)==null?void 0:u.lockedEndDate:void 0}]:[]}),a=w(()=>({[o.lockPool.id]:l.value})),d=w(()=>JSON.stringify(t.value)),c=["poolVolume","migrate","actions","myBoost"];return(i,r)=>{const u=W;return n(),B("div",null,[p(u,{vertical:"",spacing:"sm"},{default:_(()=>[k("h5",Xe,P(i.$t("veBalProtocolLiquidity")),1),(n(),g(F,{key:d.value,data:t.value,shares:a.value,hiddenColumns:c,sortColumn:"myBalance",showPoolShares:""},null,8,["data","shares"]))]),_:1})])}}}),eo=x({__name:"HeroConnectWalletButton",setup(b){const{startConnectWithInjectedProvider:o}=V(),{trackGoal:l,Goals:t}=ve(),{darkMode:a}=Ue();function d(){o(),l(t.ClickHeroConnectWallet)}return(c,i)=>{const r=I;return n(),g(r,{color:e(a)?"blue":"white",onClick:d},{default:_(()=>[G(P(c.$t("connectWallet")),1)]),_:1},8,["color"])}}}),oo=["textContent"],to={key:1,class:"mb-1 text-3xl font-semibold text-white"},so={class:"text-3xl font-semibold text-white"},no=x({__name:"PortfolioPageHero",setup(b){const o=v(!1),{fNum:l}=ye(),{isWalletReady:t,isWalletConnecting:a}=V(),{totalFiatValue:d,isLoading:c}=z(),i=w(()=>({["h-48"]:!t.value&&!a.value,["h-44"]:t.value||a.value})),r=w(()=>l(d.value,K.fiat)),u=w(()=>c.value);return(s,m)=>{const y=Re;return n(),g(Pe,{class:$e(i.value)},{default:_(()=>[k("h1",{class:"mb-2 font-body text-base font-medium text-white opacity-90",textContent:P(s.$t("myBalancerBalance"))},null,8,oo),e(t)||e(a)?(n(),B(Q,{key:0},[u.value?(n(),g(y,{key:0,class:"mx-auto w-40 h-10",white:""})):(n(),B("div",to,P(r.value),1))],64)):(n(),B(Q,{key:1},[k("div",so,P(e(l)("0",e(K).fiat)),1),p(eo,{class:"mt-4"})],64)),p(re,{isVisible:e(o),onClose:m[0]||(m[0]=C=>o.value=!1)},null,8,["isVisible"])]),_:1},8,["class"])}}});const ao={class:"xl:container xl:px-4 pt-10 md:pt-12 xl:mx-auto"},lo={class:"px-4 xl:px-0"},wt=x({__name:"portfolio",setup(b){const o=Se();xe(o);const{lockPool:l,lock:t}=se();return(a,d)=>{const c=W;return n(),B("div",null,[p(no),k("div",ao,[p(c,{vertical:""},{default:_(()=>[p(we),k("div",lo,[p(c,{horizontal:"",justify:"between",align:"center"},{default:_(()=>[k("h3",null,P(a.$t("myLiquidityInBalancerPools")),1)]),_:1})]),p(c,{vertical:"",spacing:"2xl"},{default:_(()=>{var i;return[p(Qe),e(ie)?(n(),g(Ke,{key:0})):S("",!0),e(l)&&Number((i=e(t))==null?void 0:i.lockedAmount)>0?(n(),g(Ze,{key:1,lock:e(t),lockPool:e(l)},null,8,["lock","lockPool"])):S("",!0)]}),_:1})]),_:1})])])}}});export{wt as default};
//# sourceMappingURL=portfolio-2f7910a6.js.map
